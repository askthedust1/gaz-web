import{o as s,c as a,b as c,m as v,u as I,_ as $,r as h,d as i,w as p,f as l,F as d,g as m,s as k,t as _,h as B,y as D}from"./index-E0T99ipI.js";import{_ as f}from"./PaginationComponent-CXJwl1sQ.js";import{C as P}from"./CategoriesBar-Cn4iiGWY.js";const A={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},N=c("path",{fill:"#1852E0",d:"M16 6.879a5.95 5.95 0 0 0-5.94 5.94A5.95 5.95 0 0 0 16 18.762a5.947 5.947 0 0 0 5.94-5.941A5.95 5.95 0 0 0 16 6.879m0 9.38a3.443 3.443 0 0 1-3.44-3.44A3.443 3.443 0 0 1 16 9.38a3.443 3.443 0 0 1 3.44 3.44A3.443 3.443 0 0 1 16 16.26"},null,-1),b=c("path",{fill:"#1852E0",d:"M16 0C8.931 0 3.18 5.75 3.18 12.82v.354c0 3.575 2.05 7.741 6.092 12.382 2.93 3.365 5.82 5.71 5.942 5.809L16 32l.786-.635c.121-.098 3.011-2.444 5.941-5.809 4.043-4.64 6.093-8.807 6.093-12.382v-.354C28.82 5.75 23.069 0 16 0m10.318 13.174c0 6.042-7.784 13.355-10.318 15.575-2.535-2.22-10.318-9.534-10.318-15.575v-.354C5.682 7.13 10.31 2.5 16 2.5s10.318 4.63 10.318 10.319z"},null,-1),E=[N,b];function F(e,t){return s(),a("svg",A,[...E])}const q={render:F},L={components:{CategoriesBar:P,PlaceIcon:q,PaginationComponent:f},data(){return{loading:!0,items:[],filteredItems:[],currentPage:1,pageSize:10,totalPages:1,totalItems:0}},computed:{...v(I,["currentLang"]),filterParams(){const e={};return this.currentPage&&(e.offset=(this.currentPage-1)*this.pageSize),this.pageSize&&(e.limit=this.pageSize),e.categoryId=1,e.sort="created",e.lang=this.currentLang,e}},watch:{filterParams(){this.fetchItems(),this.fetchCount()}},methods:{init(){this.loading=!0;const e=Number(this.$route.query.page)||1;this.currentPage=e;const t=[];t.push(this.fetchItems(),this.fetchCount()),Promise.all(t).finally(()=>{this.loading=!1})},fetchCount(){return this.$axiosApi.get("gazprom-app/content/news/count",{params:this.filterParams}).then(e=>{const{total:t,pages:r}=e.data;this.totalItems=t,this.totalPages=r}).catch(e=>{console.log(e)}).finally(()=>{this.loading=!1})},fetchItems(){return this.loading=!0,this.$axiosApi.get("gazprom-app/content/news",{params:this.filterParams}).then(e=>{this.items=e.data,this.filterNewsByDate()}).catch(e=>{console.log(e)}).finally(()=>{this.loading=!1})},filterNewsByDate(){this.filteredItems=this.items.sort((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime())},formatDate(e){const t=new Date(e),r=String(t.getDate()).padStart(2,"0"),u=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return`${r}.${u}.${n}`},onPageChanged(e){this.currentPage=e,this.$router.push({path:this.$route.path,query:{...this.$route.query,page:String(e)}})},onPageSizeChanged(e){this.pageSize=e,this.currentPage=1}},beforeMount(){this.init()}},M={class:"container"},T={key:0,class:"all-news"},V={key:0,class:"news-description"},W={key:1,style:{display:"flex","flex-direction":"column",gap:"20px"}};function Y(e,t,r,u,n,g){const y=P,C=k,S=h("router-link"),w=h("PlaceIcon"),x=f,z=D;return s(),a("div",M,[i(y),i(C,{tag:"h2",size:"small",style:{margin:"33px 0 30px 0"}},{default:p(()=>[l("Графики плановых работ")]),_:1}),n.loading?(s(),a("div",W,[(s(),a(d,null,m(6,o=>i(z,{key:o,style:{height:"200px",width:"100%","border-radius":"32px","margin-bottom":"30px"}})),64))])):(s(),a("div",T,[(s(!0),a(d,null,m(n.filteredItems,o=>(s(),a("div",{key:o.id,class:"article"},[c("div",null,[i(S,{class:"news-title",to:`/consumers/news/${o.id}`},{default:p(()=>[l(_(o.title),1)]),_:2},1032,["to"]),o.description?(s(),a("div",V,[c("div",null,[i(w)]),l(" "+_(o.description),1)])):B("",!0)])]))),128)),i(x,{"current-page":n.currentPage,"total-items":n.totalItems,"page-size":n.pageSize,onPageChanged:g.onPageChanged,onPageSizeChanged:g.onPageSizeChanged},null,8,["current-page","total-items","page-size","onPageChanged","onPageSizeChanged"])]))])}const J=$(L,[["render",Y],["__scopeId","data-v-6954813b"]]);export{J as default};
