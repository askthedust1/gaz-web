import{j as _,I as y,L as w,o as c,c as h,h as V,F as M,g as A,i as N,a8 as z,J as E,C as K,al as P,b as T,z as U,_ as q,r as H,d as J}from"./index-D7bkaMlJ.js";const S={style:{display:"flex","align-items":"center"}},G=["type","inputmode","placeholder","disabled"],Q={key:0},W=["innerHTML"],X=_({__name:"single-otp-input",props:{inputType:{default:"tel"},inputmode:{default:"numeric"},value:{},separator:{default:""},focus:{type:Boolean,default:!1},inputClasses:{default:""},conditionalClass:{default:""},shouldAutoFocus:{type:Boolean,default:!1},isLastChild:{type:Boolean,default:!1},placeholder:{default:""},isDisabled:{type:Boolean,default:!1}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(o,{emit:m}){const i=o,u=m,l=y(i.value||""),a=y(null),n=()=>(l.value=l.value,l.value.length>1&&(l.value=l.value.slice(0,1)),u("on-change",l.value.toString())),v=t=>t>=65&&t<=90,D=t=>t>=48&&t<=57||t>=96&&t<=105,O=t=>{i.isDisabled&&t.preventDefault();const p=t||window.event,d=p.which?p.which:p.keyCode;D(d)||i.inputType==="letter-numeric"&&v(d)||[8,9,13,37,39,46,86].includes(d)?u("on-keydown",t):p.preventDefault()},g=t=>u("on-paste",t),f=()=>(a.value.select(),u("on-focus")),C=()=>u("on-blur"),b=z(()=>["letter-numeric","number"].includes(i.inputType)?"text":i.inputType);return w(()=>i.value,(t,p)=>{t!==p&&(l.value=t)}),w(()=>i.focus,(t,p)=>{p!==t&&a.value&&i.focus&&(a.value.focus(),a.value.select())}),E(()=>{a.value&&i.focus&&i.shouldAutoFocus&&(a.value.focus(),a.value.select())}),(t,p)=>(c(),h("div",S,[K(T("input",{"data-test":"single-input",type:b.value,inputmode:t.inputmode,placeholder:t.placeholder,disabled:t.isDisabled,ref_key:"input",ref:a,min:"0",max:"9",maxlength:1,pattern:"[0-9]","onUpdate:modelValue":p[0]||(p[0]=d=>l.value=d),class:U([t.inputClasses,t.conditionalClass,{"is-complete":l.value}]),onInput:n,onKeydown:O,onPaste:g,onFocus:f,onBlur:C},null,42,G),[[P,l.value]]),!t.isLastChild&&t.separator?(c(),h("span",Q,[T("span",{innerHTML:t.separator},null,8,W)])):V("",!0)]))}}),Y={style:{display:"flex"},class:"otp-input-container"},Z={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}},R=8,ee=37,te=39,ne=46,ae=_({__name:"vue3-otp-input",props:{value:{default:""},numInputs:{default:4},separator:{default:""},inputClasses:{default:""},conditionalClass:{},inputType:{},inputmode:{default:"text"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{},isDisabled:{type:Boolean},shouldFocusOrder:{type:Boolean}},emits:["update:value","on-change","on-complete"],setup(o,{expose:m,emit:i}){const u=o,l=i,a=y(0),n=y([]),v=y([]);w(()=>u.value,e=>{if(e.length===u.numInputs||n.value.length===0){const s=e.split("");n.value=s}},{immediate:!0});const D=e=>{a.value=e},O=()=>{a.value=-1},g=()=>n.value.join("").length===u.numInputs?(l("update:value",n.value.join("")),l("on-complete",n.value.join(""))):"Wait until the user enters the required number of characters",f=e=>{a.value=Math.max(Math.min(u.numInputs-1,e),0)},C=()=>{f(a.value+1)},b=()=>{f(a.value-1)},t=e=>{v.value=Object.assign([],n.value),n.value[a.value]=e.toString(),v.value.join("")!==n.value.join("")&&(l("update:value",n.value.join("")),l("on-change",n.value.join("")),g())},p=e=>{e.preventDefault();const s=e.clipboardData.getData("text/plain").slice(0,u.numInputs-a.value).split("");if(u.inputType==="number"&&!s.join("").match(/^\d+$/)||u.inputType==="letter-numeric"&&!s.join("").match(/^\w+$/))return"Invalid pasted data";const k=n.value.slice(0,a.value).concat(s);return k.slice(0,u.numInputs).forEach(function(r,I){n.value[I]=r}),f(k.slice(0,u.numInputs).length),g()},d=e=>{t(e),C()},F=()=>{n.value.length>0&&(l("update:value",""),l("on-change","")),n.value=[],a.value=0},x=e=>{const s=e.split("");s.length===u.numInputs&&(n.value=s,l("update:value",n.value.join("")),l("on-complete",n.value.join("")))},$=(e,s)=>{switch(e.keyCode){case R:e.preventDefault(),t(""),b();break;case ne:e.preventDefault(),t("");break;case ee:e.preventDefault(),b();break;case te:e.preventDefault(),C();break;default:L(s);break}},L=e=>{u.shouldFocusOrder&&setTimeout(()=>{const s=n.value.join("").length;e-s>=0&&(a.value=s,n.value[e]="")},100)};return m({clearInput:F,fillInput:x}),(e,s)=>(c(),h("div",Y,[e.inputType==="password"?(c(),h("input",Z)):V("",!0),(c(!0),h(M,null,A(e.numInputs,(k,r)=>{var I,j;return c(),N(X,{key:r,focus:a.value===r,value:n.value[r],separator:e.separator,"input-type":e.inputType,inputmode:e.inputmode,"input-classes":e.inputClasses,conditionalClass:(I=e.conditionalClass)==null?void 0:I[r],"is-last-child":r===e.numInputs-1,"should-auto-focus":e.shouldAutoFocus,placeholder:(j=e.placeholder)==null?void 0:j[r],"is-disabled":e.isDisabled,onOnChange:d,onOnKeydown:B=>$(B,r),onOnPaste:p,onOnFocus:B=>D(r),onOnBlur:O},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnKeydown","onOnFocus"])}),128))]))}}),le=_({components:{VOtpInput:ae},props:{error:Boolean,numDigits:{type:Number,default:4}},emits:["complete"],data(){return{otpInput:null,bindValue:""}},watch:{error(){this.error&&this.clearInput()}},methods:{handleOnComplete(o){this.$emit("complete",o)},handleOnChange(o){},clearInput(){var o;(o=this.otpInput)==null||o.clearInput()}},mounted(){this.otpInput=this.$refs.otpInput}});function ue(o,m,i,u,l,a){const n=H("v-otp-input");return c(),h("div",null,[J(n,{ref:"otpInput","input-classes":["otp-input",o.error?"error":""],conditionalClass:["one","two","three","four"],inputType:"number","num-inputs":o.numDigits,modelValue:o.bindValue,"onUpdate:modelValue":m[0]||(m[0]=v=>o.bindValue=v),"should-auto-focus":!0,"should-focus-order":!0,onOnChange:o.handleOnChange,onOnComplete:o.handleOnComplete},null,8,["input-classes","num-inputs","modelValue","onOnChange","onOnComplete"])])}const se=q(le,[["render",ue]]);export{se as _};
