import{_ as Oi,o as Li,c as qi}from"./index-iNDi3pII.js";function P(r){this.content=r}P.prototype={constructor:P,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,s=n.find(r),i=n.content.slice();return s==-1?i.push(t||r,e):(i[s+1]=e,t&&(i[s]=t)),new P(i)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new P(t)},addToStart:function(r,e){return new P([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new P(t)},addBefore:function(r,e,t){var n=this.remove(e),s=n.content.slice(),i=n.find(r);return s.splice(i==-1?s.length:i,0,e,t),new P(s)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=P.from(r),r.size?new P(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=P.from(r),r.size?new P(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=P.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};P.from=function(r){if(r instanceof P)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new P(e)};function rs(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let s=r.child(n),i=e.child(n);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)t++;return t}if(s.content.size||i.content.size){let o=rs(s.content,i.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function ns(r,e,t,n){for(let s=r.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:n};let o=r.child(--s),l=e.child(--i),a=o.nodeSize;if(o==l){t-=a,n-=a;continue}if(!o.sameMarkup(l))return{a:t,b:n};if(o.isText&&o.text!=l.text){let u=0,c=Math.min(o.text.length,l.text.length);for(;u<c&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,n--;return{a:t,b:n}}if(o.content.size||l.content.size){let u=ns(o.content,l.content,t-1,n-1);if(u)return u}t-=a,n-=a}}class b{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,s=0,i){for(let o=0,l=0;l<t;o++){let a=this.content[o],u=l+a.nodeSize;if(u>e&&n(a,s+l,i||null,o)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,s+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,s){let i="",o=!0;return this.nodesBetween(e,t,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&n&&(o?o=!1:i+=n),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(s[s.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new b(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],s=0;if(t>e)for(let i=0,o=0;o<t;i++){let l=this.content[i],a=o+l.nodeSize;a>e&&((o<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,t-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,t-o-1))),n.push(l),s+=l.nodeSize),o=a}return new b(n,s)}cutByIndex(e,t){return e==t?b.empty:e==0&&t==this.content.length?this:new b(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return s[e]=t,new b(s,i)}addToStart(e){return new b([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new b(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let s=this.content[t];e(s,n,t),n+=s.nodeSize}}findDiffStart(e,t=0){return rs(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return ns(this,e,t,n)}findIndex(e,t=-1){if(e==0)return ut(0,e);if(e==this.size)return ut(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,s=0;;n++){let i=this.child(n),o=s+i.nodeSize;if(o>=e)return o==e||t>0?ut(n+1,o):ut(n,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return b.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new b(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return b.empty;let t,n=0;for(let s=0;s<e.length;s++){let i=e[s];n+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new b(t||e,n)}static from(e){if(!e)return b.empty;if(e instanceof b)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new b([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}b.empty=new b([],0);const Yt={index:0,offset:0};function ut(r,e){return Yt.index=r,Yt.offset=e,Yt}function Ct(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!Ct(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!Ct(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}let N=class pr{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ct(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=n.create(t.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return pr.none;if(e instanceof pr)return[e];let t=e.slice();return t.sort((n,s)=>n.type.rank-s.type.rank),t}};N.none=[];class wt extends Error{}class C{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=is(this.content,e+this.openStart,t);return n&&new C(n,this.openStart,this.openEnd)}removeBetween(e,t){return new C(ss(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return C.empty;let n=t.openStart||0,s=t.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new C(b.fromJSON(e,t.content),n,s)}static maxOpen(e,t=!0){let n=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new C(e,n,s)}}C.empty=new C(b.empty,0,0);function ss(r,e,t){let{index:n,offset:s}=r.findIndex(e),i=r.maybeChild(n),{index:o,offset:l}=r.findIndex(t);if(s==e||i.isText){if(l!=t&&!r.child(o).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=o)throw new RangeError("Removing non-flat range");return r.replaceChild(n,i.copy(ss(i.content,e-s-1,t-s-1)))}function is(r,e,t,n){let{index:s,offset:i}=r.findIndex(e),o=r.maybeChild(s);if(i==e||o.isText)return r.cut(0,e).append(t).append(r.cut(e));let l=is(o.content,e-i-1,t);return l&&r.replaceChild(s,o.copy(l))}function Fi(r,e,t){if(t.openStart>r.depth)throw new wt("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new wt("Inconsistent open depths");return ls(r,e,t,0)}function ls(r,e,t,n){let s=r.index(n),i=r.node(n);if(s==e.index(n)&&n<r.depth-t.openStart){let o=ls(r,e,t,n+1);return i.copy(i.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let o=r.parent,l=o.content;return Se(o,l.cut(0,r.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=Ri(t,r);return Se(i,us(r,o,l,e,n))}else return Se(i,Et(r,e,n))}function as(r,e){if(!e.type.compatibleContent(r.type))throw new wt("Cannot join "+e.type.name+" onto "+r.type.name)}function hr(r,e,t){let n=r.node(t);return as(n,e.node(t)),n}function De(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function We(r,e,t,n){let s=(e||r).node(t),i=0,o=e?e.index(t):s.childCount;r&&(i=r.index(t),r.depth>t?i++:r.textOffset&&(De(r.nodeAfter,n),i++));for(let l=i;l<o;l++)De(s.child(l),n);e&&e.depth==t&&e.textOffset&&De(e.nodeBefore,n)}function Se(r,e){return r.type.checkContent(e),r.copy(e)}function us(r,e,t,n,s){let i=r.depth>s&&hr(r,e,s+1),o=n.depth>s&&hr(t,n,s+1),l=[];return We(null,r,s,l),i&&o&&e.index(s)==t.index(s)?(as(i,o),De(Se(i,us(r,e,t,n,s+1)),l)):(i&&De(Se(i,Et(r,e,s+1)),l),We(e,t,s,l),o&&De(Se(o,Et(t,n,s+1)),l)),We(n,null,s,l),new b(l)}function Et(r,e,t){let n=[];if(We(null,r,t,n),r.depth>t){let s=hr(r,e,t+1);De(Se(s,Et(r,e,t+1)),n)}return We(e,null,t,n),new b(n)}function Ri(r,e){let t=e.depth-r.openStart,s=e.node(t).copy(r.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(b.from(s));return{start:s.resolveNoCache(r.openStart+t),end:s.resolveNoCache(s.content.size-r.openEnd-t)}}class et{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(t);return n?e.child(t).cut(n):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=n.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return N.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),s=e.maybeChild(t);if(!n){let l=n;n=s,s=l}let i=n.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!s||!n[i].isInSet(s.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new kt(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],s=0,i=t;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(i),u=i-a;if(n.push(o,l,s+a),!u||(o=o.child(l),o.isText))break;i=u-1,s+=a+1}return new et(t,n,i)}static resolveCached(e,t){let n=en.get(e);if(n)for(let i=0;i<n.elts.length;i++){let o=n.elts[i];if(o.pos==t)return o}else en.set(e,n=new Ii);let s=n.elts[n.i]=et.resolve(e,t);return n.i=(n.i+1)%Pi,s}}class Ii{constructor(){this.elts=[],this.i=0}}const Pi=12,en=new WeakMap;class kt{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zi=Object.create(null);let ve=class mr{constructor(e,t,n,s=N.none){this.type=e,this.attrs=t,this.marks=s,this.content=n||b.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,s=0){this.content.nodesBetween(e,t,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,s){return this.content.textBetween(e,t,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Ct(this.attrs,t||e.defaultAttrs||zi)&&N.sameSet(this.marks,n||N.none)}copy(e=null){return e==this.content?this:new mr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new mr(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return C.empty;let s=this.resolve(e),i=this.resolve(t),o=n?0:s.sharedDepth(t),l=s.start(o),u=s.node(o).content.cut(s.pos-l,i.pos-l);return new C(u,s.depth-o,i.depth-o)}replace(e,t,n){return Fi(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let s=this.content.child(t-1);return{node:s,index:t-1,offset:n-s.nodeSize}}resolve(e){return et.resolveCached(this,e)}resolveNoCache(e){return et.resolve(this,e)}rangeHasMark(e,t,n){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(n.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cs(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=b.empty,s=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,s,i),l=o&&o.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=s;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=N.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!N.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let s=b.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,n);return i.type.checkAttrs(i.attrs),i}};ve.prototype.text=void 0;class Dt extends ve{constructor(e,t,n,s){if(super(e,t,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cs(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Dt(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Dt(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cs(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Oe{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Hi(e,t);if(n.next==null)return Oe.empty;let s=ds(n);n.next&&n.err("Unexpected trailing text");let i=Gi(Ji(s));return Ki(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let s=this;for(let i=t;s&&i<n;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let s=[this];function i(o,l){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return b.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let p=i(d,l.concat(c));if(p)return p}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:a}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!s.type||a.validEnd)&&(n.push({match:l.contentMatch,type:l,via:s}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&t(n.next[s].next)}return t(this),e.map((n,s)=>{let i=s+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)i+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return i}).join(`
`)}}Oe.empty=new Oe(!0);class Hi{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ds(r){let e=[];do e.push(Vi(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Vi(r){let e=[];do e.push($i(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function $i(r){let e=ji(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=_i(r,e);else break;return e}function tn(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function _i(r,e){let t=tn(r),n=t;return r.eat(",")&&(r.next!="}"?n=tn(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function Ui(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let s=[];for(let i in t){let o=t[i];o.groups.indexOf(e)>-1&&s.push(o)}return s.length==0&&r.err("No node type or group '"+e+"' found"),s}function ji(r){if(r.eat("(")){let e=ds(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=Ui(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Ji(r){let e=[[]];return s(i(r,0),t()),e;function t(){return e.push([])-1}function n(o,l,a){let u={term:a,to:l};return e[o].push(u),u}function s(o,l){o.forEach(a=>a.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((a,u)=>a.concat(i(u,l)),[]);if(o.type=="seq")for(let a=0;;a++){let u=i(o.exprs[a],l);if(a==o.exprs.length-1)return u;s(u,l=t())}else if(o.type=="star"){let a=t();return n(l,a),s(i(o.expr,a),a),[n(a)]}else if(o.type=="plus"){let a=t();return s(i(o.expr,l),a),s(i(o.expr,a),a),[n(a)]}else{if(o.type=="opt")return[n(l)].concat(i(o.expr,l));if(o.type=="range"){let a=l;for(let u=0;u<o.min;u++){let c=t();s(i(o.expr,a),c),a=c}if(o.max==-1)s(i(o.expr,a),a);else for(let u=o.min;u<o.max;u++){let c=t();n(a,c),s(i(o.expr,a),c),a=c}return[n(a)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function fs(r,e){return e-r}function rn(r,e){let t=[];return n(e),t.sort(fs);function n(s){let i=r[s];if(i.length==1&&!i[0].term)return n(i[0].to);t.push(s);for(let o=0;o<i.length;o++){let{term:l,to:a}=i[o];!l&&t.indexOf(a)==-1&&n(a)}}}function Gi(r){let e=Object.create(null);return t(rn(r,0));function t(n){let s=[];n.forEach(o=>{r[o].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<s.length;c++)s[c][0]==l&&(u=s[c][1]);rn(r,a).forEach(c=>{u||s.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let i=e[n.join(",")]=new Oe(n.indexOf(r.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(fs);i.next.push({type:s[o][0],next:e[l.join(",")]||t(l)})}return i}}function Ki(r,e){for(let t=0,n=[r];t<n.length;t++){let s=n[t],i=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:a,next:u}=s.next[l];o.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),n.indexOf(u)==-1&&n.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ps(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function hs(r,e){let t=Object.create(null);for(let n in r){let s=e&&e[n];if(s===void 0){let i=r[n];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=s}return t}function ms(r,e,t,n){for(let s in e)if(!(s in r))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in r){let i=r[s];i.validate&&i.validate(e[s])}}function gs(r,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new Yi(r,n,e[n]);return t}let nn=class ys{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=gs(e,n.attrs),this.defaultAttrs=ps(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oe.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:hs(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ve(this,this.computeAttrs(e),b.from(t),N.setFrom(n))}createChecked(e=null,t,n){return t=b.from(t),this.checkContent(t),new ve(this,this.computeAttrs(e),t,N.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=b.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(b.empty,!0);return i?new ve(this,e,t.append(i),N.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ms(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:N.none:e}static compile(e,t){let n=Object.create(null);e.forEach((i,o)=>n[i]=new ys(i,t,o));let s=t.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Wi(r,e,t){let n=t.split("|");return s=>{let i=s===null?"null":typeof s;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${r}, got ${i}`)}}class Yi{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Wi(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Nr{constructor(e,t,n,s){this.name=e,this.rank=t,this.schema=n,this.spec=s,this.attrs=gs(e,s.attrs),this.excluded=null;let i=ps(this.attrs);this.instance=i?new N(this,i):null}create(e=null){return!e&&this.instance?this.instance:new N(this,hs(this.attrs,e))}static compile(e,t){let n=Object.create(null),s=0;return e.forEach((i,o)=>n[i]=new Nr(i,s++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ms(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class bs{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=P.from(e.nodes),t.marks=P.from(e.marks||{}),this.nodes=nn.compile(this.spec.nodes,this),this.marks=Nr.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=n[o]||(n[o]=Oe.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?sn(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:sn(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nn){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,s)}text(e,t){let n=this.nodes.text;return new Dt(n,n.defaultAttrs,e,N.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ve.fromJSON(this,e)}markFromJSON(e){return N.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function sn(r,e){let t=[];for(let n=0;n<e.length;n++){let s=e[n],i=r.marks[s],o=i;if(i)t.push(i);else for(let l in r.marks){let a=r.marks[l];(s=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function Zi(r){return r.tag!=null}function Qi(r){return r.style!=null}class Te{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(s=>{if(Zi(s))this.tags.push(s);else if(Qi(s)){let i=/[^=]*/.exec(s.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let n=new ln(this,t,!1);return n.addAll(e,N.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new ln(this,t,!0);return n.addAll(e,N.none,t.from,t.to),C.maxOpen(n.finish())}matchTag(e,t,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(to(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,t,n,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let t=[];function n(s){let i=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let l=t[o];if((l.priority==null?50:l.priority)<i)break}t.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{n(o=an(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{n(o=an(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Te(e,Te.schemaRules(e)))}}const As={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Xi={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xs={ol:!0,ul:!0},St=1,vt=2,Ye=4;function on(r,e,t){return e!=null?(e?St:0)|(e==="full"?vt:0):r&&r.whitespace=="pre"?St|vt:t&~Ye}class ct{constructor(e,t,n,s,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=s,this.options=o,this.content=[],this.activeMarks=N.none,this.match=i||(o&Ye?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(b.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&St)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=b.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!As.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ln{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let s=t.topNode,i,o=on(null,t.preserveWhitespace,0)|(n?Ye:0);s?i=new ct(s.type,s.attrs,N.none,!0,t.topMatch||s.type.contentMatch,o):n?i=new ct(null,null,N.none,!0,null,o):i=new ct(e.schema.topNodeType,null,N.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,s=this.top;if(s.options&vt||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s.options&St)s.options&vt?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=s.content[s.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let s=e.nodeName.toLowerCase(),i;xs.hasOwnProperty(s)&&this.parser.normalizeLists&&eo(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:Xi.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,u=this.needsBlock;if(As.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let c=o&&o.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,t);l&&this.addElementByRule(e,o,l,o.consuming===!1?i:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=n.getPropertyValue(i);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(i,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(u=>!a.clearMark(u)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,n,s){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),n)||this.leafFallback(e,n);else{let a=this.enter(o,t.attrs||null,n,t.preserveWhitespace);a&&(i=!0,n=a)}else{let a=this.parser.schema.marks[t.mark];n=n.concat(a.create(t.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,n));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,n)}i&&this.sync(l)&&this.open--}addAll(e,t,n,s){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,l=s==null?null:e.childNodes[s];o!=l;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t){let n,s;for(let i=this.open;i>=0;i--){let o=this.nodes[i],l=o.findWrapping(e);if(l&&(!n||n.length>l.length)&&(n=l,s=o,!l.length)||o.solid)break}if(!n)return null;this.sync(s);for(let i=0;i<n.length;i++)t=this.enterInner(n[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=N.none;for(let o of n.concat(e.marks))(s.type?s.type.allowsMarkType(o.type):un(o.type,e.type))&&(i=o.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,t,n,s){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,s)),i}enterInner(e,t,n,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=on(e,i,o.options);o.options&Ye&&o.content.length==0&&(l|=Ye);let a=N.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):un(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new ct(e,t,a,s,null,l)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(s?0:1),o=(l,a)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;a>=i;a--)if(o(l-1,a))return!0;return!1}else{let c=a>0||a==0&&s?this.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}}function eo(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&xs.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function to(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function an(r){let e={};for(let t in r)e[t]=r[t];return e}function un(r,e){let t=e.schema.nodes;for(let n in t){let s=t[n];if(!s.allowsMarkType(r))continue;let i=[],o=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||i.indexOf(c)<0&&o(c))return!0}};if(o(s.contentMatch))return!0}}class ot{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Zt(t).createDocumentFragment());let s=n,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let l=0,a=0;for(;l<i.length&&a<o.marks.length;){let u=o.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(i[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)s=i.pop()[1];for(;a<o.marks.length;){let u=o.marks[a++],c=this.serializeMark(u,o.isInline,t);c&&(i.push([u,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:s}=gt(Zt(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let s=this.marks[e.type.name];return s&&gt(Zt(n),s(e,t),null,e.attrs)}static renderSpec(e,t,n=null,s){return gt(e,t,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ot(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=cn(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return cn(e.marks)}}function cn(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Zt(r){return r.document||window.document}const dn=new WeakMap;function ro(r){let e=dn.get(r);return e===void 0&&dn.set(r,e=no(r)),e}function no(r){let e=null;function t(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)t(n[s]);else for(let s in n)t(n[s])}return t(r),e}function gt(r,e,t,n){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=ro(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(t=s.slice(0,o),s=s.slice(o+1));let l,a=t?r.createElementNS(t,s):r.createElement(s),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let p=d.indexOf(" ");p>0?a.setAttributeNS(d.slice(0,p),d.slice(p+1),u[d]):a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let p=e[d];if(p===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=gt(r,p,t,n);if(a.appendChild(f),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const Cs=65535,ws=Math.pow(2,16);function so(r,e){return r+e*ws}function fn(r){return r&Cs}function io(r){return(r-(r&Cs))/ws}const Es=1,ks=2,yt=4,Ds=8;class gr{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Ds)>0}get deletedBefore(){return(this.delInfo&(Es|yt))>0}get deletedAfter(){return(this.delInfo&(ks|yt))>0}get deletedAcross(){return(this.delInfo&yt)>0}}class J{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&J.empty)return J.empty}recover(e){let t=0,n=fn(e);if(!this.inverted)for(let s=0;s<n;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+t+io(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?s:0);if(a>e)break;let u=this.ranges[l+i],c=this.ranges[l+o],d=a+u;if(e<=d){let p=u?e==a?-1:e==d?1:t:t,f=a+s+(p<0?0:c);if(n)return f;let h=e==(t<0?a:d)?null:so(l/3,e-a),m=e==a?ks:e==d?Es:yt;return(t<0?e!=a:e!=d)&&(m|=Ds),new gr(f,m,h)}s+=c-u}return n?e+s:new gr(e+s,0,null)}touches(e,t){let n=0,s=fn(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?n:0);if(a>e)break;let u=this.ranges[l+i],c=a+u;if(e<=c&&l==s*3)return!0;n+=this.ranges[l+o]-u}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?i:0),a=o+(this.inverted?0:i),u=this.ranges[s+t],c=this.ranges[s+n];e(l,l+u,a,a+c),i+=c-u}}invert(){return new J(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?J.empty:new J(e<0?[0,-e,0]:[0,0,e])}}J.empty=new J([]);class Ze{constructor(e=[],t,n=0,s=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=s}slice(e=0,t=this.maps.length){return new Ze(this.maps,this.mirror,e,t)}copy(){return new Ze(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?n+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?n-s-1:void 0)}}invert(){let e=new Ze;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let s=0;for(let i=this.from;i<this.to;i++){let o=this.maps[i],l=o.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this.maps[a].recover(l.recover);continue}}s|=l.delInfo,e=l.pos}return n?e:new gr(e,s,null)}}const Qt=Object.create(null);class ${getMap(){return J.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Qt[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Qt)throw new RangeError("Duplicate use of step JSON ID "+e);return Qt[e]=t,t.prototype.jsonID=e,t}}class q{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new q(e,null)}static fail(e){return new q(null,e)}static fromReplace(e,t,n,s){try{return q.ok(e.replace(t,n,s))}catch(i){if(i instanceof wt)return q.fail(i.message);throw i}}}function Mr(r,e,t){let n=[];for(let s=0;s<r.childCount;s++){let i=r.child(s);i.content.size&&(i=i.copy(Mr(i.content,e,i))),i.isInline&&(i=e(i,t,s)),n.push(i)}return b.fromArray(n)}class Ce extends ${constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),i=new C(Mr(t.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return q.fromReplace(e,this.from,this.to,i)}invert(){return new we(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ce(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ce&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ce(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ce(t.from,t.to,e.markFromJSON(t.mark))}}$.jsonID("addMark",Ce);class we extends ${constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new C(Mr(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return q.fromReplace(e,this.from,this.to,n)}invert(){return new Ce(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new we(t.pos,n.pos,this.mark)}merge(e){return e instanceof we&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new we(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new we(t.from,t.to,e.markFromJSON(t.mark))}}$.jsonID("removeMark",we);class Ee extends ${constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return q.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return q.fromReplace(e,this.pos,this.pos+1,new C(b.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(n))return new Ee(this.pos,t.marks[s]);return new Ee(this.pos,this.mark)}}return new tt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ee(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ee(t.pos,e.markFromJSON(t.mark))}}$.jsonID("addNodeMark",Ee);class tt extends ${constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return q.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return q.fromReplace(e,this.pos,this.pos+1,new C(b.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ee(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tt(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new tt(t.pos,e.markFromJSON(t.mark))}}$.jsonID("removeNodeMark",tt);class j extends ${constructor(e,t,n,s=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=s}apply(e){return this.structure&&yr(e,this.from,this.to)?q.fail("Structure replace would overwrite content"):q.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new J([this.from,this.to-this.from,this.slice.size])}invert(e){return new j(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new j(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof j)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?C.empty:new C(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new j(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?C.empty:new C(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new j(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new j(t.from,t.to,C.fromJSON(e,t.slice),!!t.structure)}}$.jsonID("replace",j);class U extends ${constructor(e,t,n,s,i,o,l=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=s,this.slice=i,this.insert=o,this.structure=l}apply(e){if(this.structure&&(yr(e,this.from,this.gapFrom)||yr(e,this.gapTo,this.to)))return q.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return q.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?q.fromReplace(e,this.from,this.to,n):q.fail("Content does not fit in gap")}getMap(){return new J([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new U(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||s<t.pos||i>n.pos?null:new U(t.pos,n.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new U(t.from,t.to,t.gapFrom,t.gapTo,C.fromJSON(e,t.slice),t.insert,!!t.structure)}}$.jsonID("replaceAround",U);function yr(r,e,t){let n=r.resolve(e),s=t-e,i=n.depth;for(;s>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,s--;if(s>0){let o=n.node(i).maybeChild(n.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function oo(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function je(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let s=r.$from.node(n),i=r.$from.index(n),o=r.$to.indexAfter(n);if(n<r.depth&&s.canReplace(i,o,t))return n;if(n==0||s.type.spec.isolating||!oo(s,i,o))break}return null}function Br(r,e,t=null,n=r){let s=lo(r,e),i=s&&ao(n,e);return i?s.map(pn).concat({type:e,attrs:t}).concat(i.map(pn)):null}function pn(r){return{type:r,attrs:null}}function lo(r,e){let{parent:t,startIndex:n,endIndex:s}=r,i=t.contentMatchAt(n).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return t.canReplaceWith(n,s,o)?i:null}function ao(r,e){let{parent:t,startIndex:n,endIndex:s}=r,i=t.child(n),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;a&&u<s;u++)a=a.matchType(t.child(u).type);return!a||!a.validEnd?null:o}function He(r,e,t=1,n){let s=r.resolve(e),i=s.depth-t,o=n&&n[n.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,c=t-2;u>i;u--,c--){let d=s.node(u),p=s.index(u);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(p,d.childCount),h=n&&n[c+1];h&&(f=f.replaceChild(0,h.type.create(h.attrs)));let m=n&&n[c]||d;if(!d.canReplace(p+1,d.childCount)||!m.type.validContent(f))return!1}let l=s.indexAfter(i),a=n&&n[0];return s.node(i).canReplaceWith(l,l,a?a.type:s.node(i+1).type)}function ge(r,e){let t=r.resolve(e),n=t.index();return Ss(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function Ss(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function zt(r,e,t=-1){let n=r.resolve(e);for(let s=n.depth;;s--){let i,o,l=n.index(s);if(s==n.depth?(i=n.nodeBefore,o=n.nodeAfter):t>0?(i=n.node(s+1),l++,o=n.node(s).maybeChild(l)):(i=n.node(s).maybeChild(l-1),o=n.node(s+1)),i&&!i.isTextblock&&Ss(i,o)&&n.node(s).canReplace(l,l+1))return e;if(s==0)break;e=t<0?n.before(s):n.after(s)}}function vs(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,a=n.index(o)+(l>0?1:0),u=n.node(o),c=!1;if(i==1)c=u.canReplace(a,a,s);else{let d=u.contentMatchAt(a).findWrapping(s.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function Or(r,e,t=e,n=C.empty){if(e==t&&!n.size)return null;let s=r.resolve(e),i=r.resolve(t);return uo(s,i,n)?new j(e,t,n):new co(s,i,n).fit()}function uo(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class co{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=b.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=b.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let i=this.placed,o=n.depth,l=s.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let a=new C(i,o,l);return e>-1?new U(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new j(n.pos,s.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let s,i=null;n?(i=Xt(this.unplaced.content,n-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(t==1&&(o?u.matchType(o.type)||(d=u.fillBefore(b.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:l,parent:i,inject:d};if(t==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:i,wrap:c};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=Xt(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new C(e,t+1,Math.max(n,s.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=Xt(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new C(Ge(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new C(Ge(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let o=this.unplaced,l=n?n.content:o.content,a=o.openStart-e,u=0,c=[],{match:d,type:p}=this.frontier[t];if(s){for(let m=0;m<s.childCount;m++)c.push(s.child(m));d=d.matchFragment(s)}let f=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let m=l.child(u),g=d.matchType(m.type);if(!g)break;u++,(u>1||a==0||m.content.size)&&(d=g,c.push(Ts(m.mark(p.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?f:-1)))}let h=u==l.childCount;h||(f=-1),this.placed=Ke(this.placed,t,b.from(c)),this.frontier[t].match=d,h&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=h?e==0?C.empty:new C(Ge(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new C(Ge(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!er(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=er(e,t,s,n,i);if(o){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=er(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ke(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let s=e.node(n),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Ke(this.placed,this.depth,b.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(b.empty,!0);t.childCount&&(this.placed=Ke(this.placed,this.frontier.length,t))}}function Ge(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(Ge(r.firstChild.content,e-1,t)))}function Ke(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(Ke(r.lastChild.content,e-1,t)))}function Xt(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function Ts(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,Ts(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(b.empty,!0)))),r.copy(n)}function er(r,e,t,n,s){let i=r.node(e),o=s?r.indexAfter(e):r.index(e);if(o==i.childCount&&!t.compatibleContent(i.type))return null;let l=n.fillBefore(i.content,!0,o);return l&&!fo(t,i.content,o)?l:null}function fo(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}class Qe extends ${constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return q.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let s=t.type.create(n,null,t.marks);return q.fromReplace(e,this.pos,this.pos+1,new C(b.from(s),0,t.isLeaf?0:1))}getMap(){return J.empty}invert(e){return new Qe(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qe(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qe(t.pos,t.attr,t.value)}}$.jsonID("attr",Qe);class Tt extends ${constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return q.ok(n)}getMap(){return J.empty}invert(e){return new Tt(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tt(t.attr,t.value)}}$.jsonID("docAttr",Tt);let rt=class extends Error{};rt=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};rt.prototype=Object.create(Error.prototype);rt.prototype.constructor=rt;rt.prototype.name="TransformError";const tr=Object.create(null);class D{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new po(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=C.empty){let n=t.content.lastChild,s=null;for(let l=0;l<t.openEnd;l++)s=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:u}=o[l],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(u.pos),l?C.empty:t),l==0&&gn(e,i,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:l}=s[i],a=e.mapping.slice(n),u=a.map(o.pos),c=a.map(l.pos);i?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),gn(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let s=e.parent.inlineContent?new E(e):Re(e.node(0),e.parent,e.pos,e.index(),t,n);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=t<0?Re(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):Re(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new te(e.node(0))}static atStart(e){return Re(e,e,0,0,1)||new te(e)}static atEnd(e){return Re(e,e,e.content.size,e.childCount,-1)||new te(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=tr[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in tr)throw new RangeError("Duplicate use of selection JSON ID "+e);return tr[e]=t,t.prototype.jsonID=e,t}getBookmark(){return E.between(this.$anchor,this.$head).getBookmark()}}D.prototype.visible=!0;class po{constructor(e,t){this.$from=e,this.$to=t}}let hn=!1;function mn(r){!hn&&!r.parent.inlineContent&&(hn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class E extends D{constructor(e,t=e){mn(e),mn(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return D.near(n);let s=e.resolve(t.map(this.anchor));return new E(s.parent.inlineContent?s:n,n)}replace(e,t=C.empty){if(super.replace(e,t),t==C.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof E&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ht(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new E(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let s=e.resolve(t);return new this(s,n==t?s:e.resolve(n))}static between(e,t,n){let s=e.pos-t.pos;if((!n||s)&&(n=s>=0?1:-1),!t.parent.inlineContent){let i=D.findFrom(t,n,!0)||D.findFrom(t,-n,!0);if(i)t=i.$head;else return D.near(t,n)}return e.parent.inlineContent||(s==0?e=t:(e=(D.findFrom(e,-n,!0)||D.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new E(e,t)}}D.jsonID("text",E);class Ht{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ht(e.map(this.anchor),e.map(this.head))}resolve(e){return E.between(e.resolve(this.anchor),e.resolve(this.head))}}class w extends D{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return n?D.near(i):new w(i)}content(){return new C(b.from(this.node),0,0)}eq(e){return e instanceof w&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lr(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new w(e.resolve(t.anchor))}static create(e,t){return new w(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}w.prototype.visible=!1;D.jsonID("node",w);class Lr{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Ht(n,n):new Lr(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&w.isSelectable(n)?new w(t):D.near(t)}}class te extends D{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=C.empty){if(t==C.empty){e.delete(0,e.doc.content.size);let n=D.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new te(e)}map(e){return new te(e)}eq(e){return e instanceof te}getBookmark(){return ho}}D.jsonID("all",te);const ho={map(){return this},resolve(r){return new te(r)}};function Re(r,e,t,n,s,i=!1){if(e.inlineContent)return E.create(r,t);for(let o=n-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let l=e.child(o);if(l.isAtom){if(!i&&w.isSelectable(l))return w.create(r,t-(s<0?l.nodeSize:0))}else{let a=Re(r,l,t+s,s<0?l.childCount:0,s,i);if(a)return a}t+=l.nodeSize*s}return null}function gn(r,e,t){let n=r.steps.length-1;if(n<e)return;let s=r.steps[n];if(!(s instanceof j||s instanceof U))return;let i=r.mapping.maps[n],o;i.forEach((l,a,u,c)=>{o==null&&(o=c)}),r.setSelection(D.near(r.doc.resolve(o),t))}function yn(r,e){return!e||!r?r:r.bind(e)}class dt{constructor(e,t,n){this.name=e,this.init=yn(t.init,n),this.apply=yn(t.apply,n)}}new dt("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new dt("selection",{init(r,e){return r.selection||D.atStart(e.doc)},apply(r){return r.selection}}),new dt("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new dt("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}});function Ns(r,e,t){for(let n in r){let s=r[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=Ns(s,e,{})),t[n]=s}return t}class K{constructor(e){this.spec=e,this.props={},e.props&&Ns(e.props,this,this.props),this.key=e.key?e.key.key:Ms("plugin")}getState(e){return e[this.key]}}const rr=Object.create(null);function Ms(r){return r in rr?r+"$"+ ++rr[r]:(rr[r]=0,r+"$")}class ae{constructor(e="key"){this.key=Ms(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Le=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Bs=function(r,e,t,n){return t&&(bn(r,e,t,n,-1)||bn(r,e,t,n,1))},mo=/^(img|br|input|textarea|hr)$/i;function bn(r,e,t,n,s){for(;;){if(r==t&&e==n)return!0;if(e==(s<0?0:Nt(r))){let i=r.parentNode;if(!i||i.nodeType!=1||qr(r)||mo.test(r.nodeName)||r.contentEditable=="false")return!1;e=Le(r)+(s<0?0:1),r=i}else if(r.nodeType==1){if(r=r.childNodes[e+(s<0?-1:0)],r.contentEditable=="false")return!1;e=s<0?Nt(r):0}else return!1}}function Nt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function go(r,e,t){for(let n=e==0,s=e==Nt(r);n||s;){if(r==t)return!0;let i=Le(r);if(r=r.parentNode,!r)return!1;n=n&&i==0,s=s&&i==Nt(r)}}function qr(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const Os=function(r){return r.focusNode&&Bs(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function Ls(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}const oe=typeof navigator<"u"?navigator:null,An=typeof document<"u"?document:null,ye=oe&&oe.userAgent||"",br=/Edge\/(\d+)/.exec(ye),qs=/MSIE \d/.exec(ye),Ar=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ye),lt=!!(qs||Ar||br),Fs=qs?document.documentMode:Ar?+Ar[1]:br?+br[1]:0,Vt=!lt&&/gecko\/(\d+)/i.test(ye);Vt&&+(/Firefox\/(\d+)/.exec(ye)||[0,0])[1];const xr=!lt&&/Chrome\/(\d+)/.exec(ye),be=!!xr,Rs=xr?+xr[1]:0,qe=!lt&&!!oe&&/Apple Computer/.test(oe.vendor),Fr=qe&&(/Mobile\/\w+/.test(ye)||!!oe&&oe.maxTouchPoints>2),W=Fr||(oe?/Mac/.test(oe.platform):!1),yo=oe?/Win/.test(oe.platform):!1,at=/Android \d/.test(ye),Rr=!!An&&"webkitFontSmoothing"in An.documentElement.style,bo=Rr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ao(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let s=r.docView.nearestDesc(t.focusNode),i=s&&s.size==0,o=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let l=n.resolve(o),a,u;if(Os(t)){for(a=l;s&&!s.node;)s=s.parent;let c=s.node;if(s&&c.isAtom&&w.isSelectable(c)&&s.parent&&!(c.isInline&&go(t.focusNode,t.focusOffset,s.dom))){let d=s.posBefore;u=new w(o==d?l:n.resolve(d))}}else{let c=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;a=n.resolve(c)}if(!u){let c=e=="pointer"||r.state.selection.head<l.pos&&!i?1:-1;u=Ps(r,a,l,c)}return u}function Is(r){return r.editable?r.hasFocus():Eo(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function Ir(r,e=!1){let t=r.state.selection;if(wo(r,t),!!Is(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&be){let n=r.domSelectionRange(),s=r.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Bs(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)Co(r);else{let{anchor:n,head:s}=t,i,o;xn&&!(t instanceof E)&&(t.$from.parent.inlineContent||(i=Cn(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Cn(r,t.to))),r.docView.setSelection(n,s,r.root,e),xn&&(i&&wn(i),o&&wn(o)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xo(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const xn=qe||be&&Rs<63;function Cn(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),s=n<t.childNodes.length?t.childNodes[n]:null,i=n?t.childNodes[n-1]:null;if(qe&&s&&s.contentEditable=="false")return nr(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return nr(s);if(i)return nr(i)}}function nr(r){return r.contentEditable="true",qe&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function wn(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function xo(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!Is(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function Co(r){let e=r.domSelection(),t=document.createRange();if(!e)return;let n=r.cursorWrapper.dom,s=n.nodeName=="IMG";s?t.setStart(n.parentNode,Le(n)+1):t.setStart(n,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!r.state.selection.visible&&lt&&Fs<=11&&(n.disabled=!0,n.disabled=!1)}function wo(r,e){if(e instanceof w){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(En(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else En(r)}function En(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function Ps(r,e,t,n){return r.someProp("createSelectionBetween",s=>s(r,e,t))||E.between(e,t,n)}function Eo(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Cr(r,e){let{$anchor:t,$head:n}=r.selection,s=e>0?t.max(n):t.min(n),i=s.parent.inlineContent?s.depth?r.doc.resolve(e>0?s.after():s.before()):null:s;return i&&D.findFrom(i,e)}function ce(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function kn(r,e,t){let n=r.state.selection;if(n instanceof E)if(t.indexOf("s")>-1){let{$head:s}=n,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=r.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return ce(r,new E(n.$anchor,o))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let s=Cr(r.state,e);return s&&s instanceof w?ce(r,s):!1}else if(!(W&&t.indexOf("m")>-1)){let s=n.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let l=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=r.docView.descAt(l))&&!o.contentDOM?w.isSelectable(i)?ce(r,new w(e<0?r.state.doc.resolve(s.pos-i.nodeSize):s)):Rr?ce(r,new E(r.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof w&&n.node.isInline)return ce(r,new E(e>0?n.$to:n.$from));{let s=Cr(r.state,e);return s?ce(r,s):!1}}}function Mt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Xe(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Fe(r,e){return e<0?ko(r):Do(r)}function ko(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s,i,o=!1;for(Vt&&t.nodeType==1&&n<Mt(t)&&Xe(t.childNodes[n],-1)&&(o=!0);;)if(n>0){if(t.nodeType!=1)break;{let l=t.childNodes[n-1];if(Xe(l,-1))s=t,i=--n;else if(l.nodeType==3)t=l,n=t.nodeValue.length;else break}}else{if(zs(t))break;{let l=t.previousSibling;for(;l&&Xe(l,-1);)s=t.parentNode,i=Le(l),l=l.previousSibling;if(l)t=l,n=Mt(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}o?wr(r,t,n):s&&wr(r,s,i)}function Do(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s=Mt(t),i,o;for(;;)if(n<s){if(t.nodeType!=1)break;let l=t.childNodes[n];if(Xe(l,1))i=t,o=++n;else break}else{if(zs(t))break;{let l=t.nextSibling;for(;l&&Xe(l,1);)i=l.parentNode,o=Le(l)+1,l=l.nextSibling;if(l)t=l,n=0,s=Mt(t);else{if(t=t.parentNode,t==r.dom)break;n=s=0}}}i&&wr(r,i,o)}function zs(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function So(r,e){for(;r&&e==r.childNodes.length&&!qr(r);)e=Le(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function vo(r,e){for(;r&&!e&&!qr(r);)e=Le(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function wr(r,e,t){if(e.nodeType!=3){let i,o;(o=So(e,t))?(e=o,t=0):(i=vo(e,t))&&(e=i,t=i.nodeValue.length)}let n=r.domSelection();if(!n)return;if(Os(n)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:s}=r;setTimeout(()=>{r.state==s&&Ir(r)},50)}function Dn(r,e){let t=r.state.doc.resolve(e);if(!(be||yo)&&t.parent.inlineContent){let s=r.coordsAtPos(e);if(e>t.start()){let i=r.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=r.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function Sn(r,e,t){let n=r.state.selection;if(n instanceof E&&!n.empty||t.indexOf("s")>-1||W&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=n;if(!s.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let o=Cr(r.state,e);if(o&&o instanceof w)return ce(r,o)}if(!s.parent.inlineContent){let o=e<0?s:i,l=n instanceof te?D.near(o,e):D.findFrom(o,e);return l?ce(r,l):!1}return!1}function vn(r,e){if(!(r.state.selection instanceof E))return!0;let{$head:t,$anchor:n,empty:s}=r.state.selection;if(!t.sameParent(n))return!0;if(!s)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let o=r.state.tr;return e<0?o.delete(t.pos-i.nodeSize,t.pos):o.delete(t.pos,t.pos+i.nodeSize),r.dispatch(o),!0}return!1}function Tn(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function To(r){if(!qe||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Tn(r,n,"true"),setTimeout(()=>Tn(r,n,"false"),20)}return!1}function No(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function Mo(r,e){let t=e.keyCode,n=No(e);if(t==8||W&&t==72&&n=="c")return vn(r,-1)||Fe(r,-1);if(t==46&&!e.shiftKey||W&&t==68&&n=="c")return vn(r,1)||Fe(r,1);if(t==13||t==27)return!0;if(t==37||W&&t==66&&n=="c"){let s=t==37?Dn(r,r.state.selection.from)=="ltr"?-1:1:-1;return kn(r,s,n)||Fe(r,s)}else if(t==39||W&&t==70&&n=="c"){let s=t==39?Dn(r,r.state.selection.from)=="ltr"?1:-1:1;return kn(r,s,n)||Fe(r,s)}else{if(t==38||W&&t==80&&n=="c")return Sn(r,-1,n)||Fe(r,-1);if(t==40||W&&t==78&&n=="c")return To(r)||Sn(r,1,n)||Fe(r,1);if(n==(W?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Hs(r,e){r.someProp("transformCopied",f=>{e=f(e,r)});let t=[],{content:n,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,i--;let f=n.firstChild;t.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),n=f.content}let o=r.someProp("clipboardSerializer")||ot.fromSchema(r.state.schema),l=Js(),a=l.createElement("div");a.appendChild(o.serializeFragment(n,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=js[u.nodeName.toLowerCase()]);){for(let f=c.length-1;f>=0;f--){let h=l.createElement(c[f]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(t)}`);let p=r.someProp("clipboardTextSerializer",f=>f(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:p,slice:e}}function Vs(r,e,t,n,s){let i=s.parent.type.spec.code,o,l;if(!t&&!e)return null;let a=e&&(n||i||!t);if(a){if(r.someProp("transformPastedText",p=>{e=p(e,i||n,r)}),i)return e?new C(b.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):C.empty;let d=r.someProp("clipboardTextParser",p=>p(e,s,n,r));if(d)l=d;else{let p=s.marks(),{schema:f}=r.state,h=ot.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(h.serializeNode(f.text(m,p)))})}}else r.someProp("transformPastedHTML",d=>{t=d(t,r)}),o=Lo(t),Rr&&qo(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(r.someProp("clipboardParser")||r.someProp("domParser")||Te.fromSchema(r.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||c),context:s,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!Bo.test(p.parentNode.nodeName)?{ignore:!0}:null}})),c)l=Fo(Nn(l,+c[1],+c[2]),c[4]);else if(l=C.maxOpen(Oo(l.content,s),!0),l.openStart||l.openEnd){let d=0,p=0;for(let f=l.content.firstChild;d<l.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=l.content.lastChild;p<l.openEnd&&!f.type.spec.isolating;p++,f=f.lastChild);l=Nn(l,d,p)}return r.someProp("transformPasted",d=>{l=d(l,r)}),l}const Bo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Oo(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,o=[];if(r.forEach(l=>{if(!o)return;let a=s.findWrapping(l.type),u;if(!a)return o=null;if(u=o.length&&i.length&&_s(a,i,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=Us(o[o.length-1],i.length));let c=$s(l,a);o.push(c),s=s.matchType(c.type),i=a}}),o)return b.from(o)}return r}function $s(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,b.from(r));return r}function _s(r,e,t,n,s){if(s<r.length&&s<e.length&&r[s]==e[s]){let i=_s(r,e,t,n.lastChild,s+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(s==r.length-1?t.type:r[s+1]))return n.copy(n.content.append(b.from($s(t,r,s+1))))}}function Us(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,Us(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(b.empty,!0);return r.copy(t.append(n))}function Er(r,e,t,n,s,i){let o=e<0?r.firstChild:r.lastChild,l=o.content;return r.childCount>1&&(i=0),s<n-1&&(l=Er(l,e,t,n,s+1,i)),s>=t&&(l=e<0?o.contentMatchAt(0).fillBefore(l,i<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(b.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,o.copy(l))}function Nn(r,e,t){return e<r.openStart&&(r=new C(Er(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new C(Er(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const js={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mn=null;function Js(){return Mn||(Mn=document.implementation.createHTMLDocument("title"))}function Lo(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=Js().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),s;if((s=n&&js[n[1].toLowerCase()])&&(r=s.map(i=>"<"+i+">").join("")+r+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=r,s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function qo(r){let e=r.querySelectorAll(be?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function Fo(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:s,openStart:i,openEnd:o}=r;for(let l=n.length-2;l>=0;l-=2){let a=t.nodes[n[l]];if(!a||a.hasRequiredAttrs())break;s=b.from(a.create(n[l+1],s)),i++,o++}return new C(s,i,o)}const re={},G={};function fe(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}G.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!Ks(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(at&&be&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),Fr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",s=>s(r,Ls(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||Mo(r,t)?t.preventDefault():fe(r,"key")};G.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};G.keypress=(r,e)=>{let t=e;if(Ks(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||W&&t.metaKey)return;if(r.someProp("handleKeyPress",s=>s(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof E)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!r.someProp("handleTextInput",i=>i(r,n.$from.pos,n.$to.pos,s))&&r.dispatch(r.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function $t(r){return{left:r.clientX,top:r.clientY}}function Ro(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function Pr(r,e,t,n,s){if(n==-1)return!1;let i=r.state.doc.resolve(n);for(let o=i.depth+1;o>0;o--)if(r.someProp(e,l=>o>i.depth?l(r,t,i.nodeAfter,i.before(o),s,!0):l(r,t,i.node(o),i.before(o),s,!1)))return!0;return!1}function Ve(r,e,t){if(r.focused||r.focus(),r.state.selection.eq(e))return;let n=r.state.tr.setSelection(e);n.setMeta("pointer",!0),r.dispatch(n)}function Io(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&w.isSelectable(n)?(Ve(r,new w(t)),!0):!1}function Po(r,e){if(e==-1)return!1;let t=r.state.selection,n,s;t instanceof w&&(n=t.node);let i=r.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(w.isSelectable(l)){n&&t.$from.depth>0&&o>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(o);break}}return s!=null?(Ve(r,w.create(r.state.doc,s)),!0):!1}function zo(r,e,t,n,s){return Pr(r,"handleClickOn",e,t,n)||r.someProp("handleClick",i=>i(r,e,n))||(s?Po(r,t):Io(r,t))}function Ho(r,e,t,n){return Pr(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",s=>s(r,e,n))}function Vo(r,e,t,n){return Pr(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",s=>s(r,e,n))||$o(r,t,n)}function $o(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(Ve(r,E.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),l=s.before(i);if(o.inlineContent)Ve(r,E.create(n,l+1,l+1+o.content.size));else if(w.isSelectable(o))Ve(r,w.create(n,l));else continue;return!0}}function zr(r){return Bt(r)}const Gs=W?"metaKey":"ctrlKey";re.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=zr(r),s=Date.now(),i="singleClick";s-r.input.lastClick.time<500&&Ro(t,r.input.lastClick)&&!t[Gs]&&(r.input.lastClick.type=="singleClick"?i="doubleClick":r.input.lastClick.type=="doubleClick"&&(i="tripleClick")),r.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};let o=r.posAtCoords($t(t));o&&(i=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new _o(r,o,t,!!n)):(i=="doubleClick"?Ho:Vo)(r,o.pos,o.inside,t)?t.preventDefault():fe(r,"pointer"))};class _o{constructor(e,t,n,s){this.view=e,this.pos=t,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Gs],this.allowDefault=n.shiftKey;let i,o;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let c=e.state.doc.resolve(t.pos);i=c.parent,o=c.depth?c.before():0}const l=s?null:n.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof w&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Vt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fe(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ir(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords($t(e))),this.updateAllowDefault(e),this.allowDefault||!t?fe(this.view,"pointer"):zo(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qe&&this.mightDrag&&!this.mightDrag.node.isAtom||be&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ve(this.view,D.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):fe(this.view,"pointer")}move(e){this.updateAllowDefault(e),fe(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}re.touchstart=r=>{r.input.lastTouch=Date.now(),zr(r),fe(r,"pointer")};re.touchmove=r=>{r.input.lastTouch=Date.now(),fe(r,"pointer")};re.contextmenu=r=>zr(r);function Ks(r,e){return r.composing?!0:qe&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const Uo=at?5e3:-1;G.compositionstart=G.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$to;if(e.selection instanceof E&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),Bt(r,!0),r.markCursor=null;else if(Bt(r,!e.selection.empty),Vt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let s=n.focusNode,i=n.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=r.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}r.input.composing=!0}Ws(r,Uo)};G.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,Ws(r,20))};function Ws(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>Bt(r),e))}function jo(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=Jo());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Jo(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function Bt(r,e=!1){if(!(at&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),jo(r),e||r.docView&&r.docView.dirty){let t=Ao(r);return t&&!t.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!r.state.selection.empty?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function Go(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const nt=lt&&Fs<15||Fr&&bo<604;re.copy=G.cut=(r,e)=>{let t=e,n=r.state.selection,s=t.type=="cut";if(n.empty)return;let i=nt?null:t.clipboardData,o=n.content(),{dom:l,text:a}=Hs(r,o);i?(t.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):Go(r,l),s&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Ko(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function Wo(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?kr(r,n.value,null,s,e):kr(r,n.textContent,n.innerHTML,s,e)},50)}function kr(r,e,t,n,s){let i=Vs(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",a=>a(r,s,i||C.empty)))return!0;if(!i)return!1;let o=Ko(i),l=o?r.state.tr.replaceSelectionWith(o,n):r.state.tr.replaceSelection(i);return r.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Ys(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}G.paste=(r,e)=>{let t=e;if(r.composing&&!at)return;let n=nt?null:t.clipboardData,s=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&kr(r,Ys(n),n.getData("text/html"),s,t)?t.preventDefault():Wo(r,t)};class Yo{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Zs=W?"altKey":"ctrlKey";re.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let s=r.state.selection,i=s.empty?null:r.posAtCoords($t(t)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof w?s.to-1:s.to))){if(n&&n.mightDrag)o=w.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=r.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=r.docView&&(o=w.create(r.state.doc,d.posBefore))}}let l=(o||r.state.selection).content(),{dom:a,text:u,slice:c}=Hs(r,l);(!t.dataTransfer.files.length||!be||Rs>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(nt?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",nt||t.dataTransfer.setData("text/plain",u),r.dragging=new Yo(c,!t[Zs],o)};re.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};G.dragover=G.dragenter=(r,e)=>e.preventDefault();G.drop=(r,e)=>{let t=e,n=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let s=r.posAtCoords($t(t));if(!s)return;let i=r.state.doc.resolve(s.pos),o=n&&n.slice;o?r.someProp("transformPasted",h=>{o=h(o,r)}):o=Vs(r,Ys(t.dataTransfer),nt?null:t.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&!t[Zs]);if(r.someProp("handleDrop",h=>h(r,t,o||C.empty,l))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?vs(r.state.doc,i.pos,o):i.pos;a==null&&(a=i.pos);let u=r.state.tr;if(l){let{node:h}=n;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=u.doc;if(d?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(p))return;let f=u.doc.resolve(c);if(d&&w.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new w(f));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,y,x)=>h=x),u.setSelection(Ps(r,f,u.doc.resolve(h)))}r.focus(),r.dispatch(u.setMeta("uiEvent","drop"))};re.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&Ir(r)},20))};re.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};re.beforeinput=(r,e)=>{if(be&&at&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",i=>i(r,Ls(8,"Backspace")))))return;let{$cursor:s}=r.state.selection;s&&s.pos>0&&r.dispatch(r.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let r in G)re[r]=G[r];function st(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class Ot{constructor(e,t){this.toDOM=e,this.spec=t||Ne,this.side=this.spec.side||0}map(e,t,n,s){let{pos:i,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new ee(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Ot&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&st(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class pe{constructor(e,t){this.attrs=e,this.spec=t||Ne}map(e,t,n,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new ee(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof pe&&st(this.attrs,e.attrs)&&st(this.spec,e.spec)}static is(e){return e.type instanceof pe}destroy(){}}class Hr{constructor(e,t){this.attrs=e,this.spec=t||Ne}map(e,t,n,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=i.pos?null:new ee(i.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(n)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof Hr&&st(this.attrs,e.attrs)&&st(this.spec,e.spec)}destroy(){}}class ee{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new ee(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new ee(e,e,new Ot(t,n))}static inline(e,t,n,s){return new ee(e,t,new pe(n,s))}static node(e,t,n,s){return new ee(e,t,new Hr(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof pe}get widget(){return this.type instanceof Ot}}const Ie=[],Ne={};class R{constructor(e,t){this.local=e.length?e:Ie,this.children=t.length?t:Ie}static create(e,t){return t.length?Lt(t,e,0,Ne):_}find(e,t,n){let s=[];return this.findInner(e??0,t??1e9,s,0,n),s}findInner(e,t,n,s,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=t&&l.to>=e&&(!i||i(l.spec))&&n.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,t-l,n,s+l,i)}}map(e,t,n){return this==_||e.maps.length==0?this:this.mapInner(e,t,0,0,n||Ne)}mapInner(e,t,n,s,i){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,n,s);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?Zo(this.children,o||[],e,t,n,s,i):o?new R(o.sort(Me),Ie):_}add(e,t){return t.length?this==_?R.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let s,i=0;e.forEach((l,a)=>{let u=a+n,c;if(c=Xs(t,l,u)){for(s||(s=this.children.slice());i<s.length&&s[i]<a;)i+=3;s[i]==a?s[i+2]=s[i+2].addInner(l,c,u+1):s.splice(i,0,a,a+l.nodeSize,Lt(c,l,u+1,Ne)),i+=3}});let o=Qs(i?ei(t):t,-n);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new R(o.length?this.local.concat(o).sort(Me):this.local,s||this.children)}remove(e){return e.length==0||this==_?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,s=this.local;for(let i=0;i<n.length;i+=3){let o,l=n[i]+t,a=n[i+1]+t;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[i+2].removeInner(o,l+1);u!=_?n[i+2]=u:(n.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let l=0;l<s.length;l++)s[l].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new R(s,n):_}forChild(e,t){if(this==_)return this;if(t.isLeaf)return R.empty;let n,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let i=e+1,o=i+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>i&&a.type instanceof pe){let u=Math.max(i,a.from)-i,c=Math.min(o,a.to)-i;u<c&&(s||(s=[])).push(a.copy(u,c))}}if(s){let l=new R(s.sort(Me),Ie);return n?new xe([l,n]):l}return n||_}eq(e){if(this==e)return!0;if(!(e instanceof R)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Vr(this.localsInner(e))}localsInner(e){if(this==_)return Ie;if(e.inlineContent||!this.local.some(pe.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof pe||t.push(this.local[n]);return t}forEachSet(e){e(this)}}R.empty=new R([],[]);R.removeOverlap=Vr;const _=R.empty;class xe{constructor(e){this.members=e}map(e,t){const n=this.members.map(s=>s.map(e,t,Ne));return xe.from(n)}forChild(e,t){if(t.isLeaf)return R.empty;let n=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=_&&(i instanceof xe?n=n.concat(i.members):n.push(i))}return xe.from(n)}eq(e){if(!(e instanceof xe)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{n&&(t=t.slice(),n=!1);for(let o=0;o<i.length;o++)t.push(i[o])}}return t?Vr(n?t:t.sort(Me)):Ie}static from(e){switch(e.length){case 0:return _;case 1:return e[0];default:return new xe(e.every(t=>t instanceof R)?e:e.reduce((t,n)=>t.concat(n instanceof R?n:n.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Zo(r,e,t,n,s,i,o){let l=r.slice();for(let u=0,c=i;u<t.maps.length;u++){let d=0;t.maps[u].forEach((p,f,h,m)=>{let g=m-h-(f-p);for(let y=0;y<l.length;y+=3){let x=l[y+1];if(x<0||p>x+c-d)continue;let S=l[y]+c-d;f>=S?l[y+1]=p<=S?-2:-1:p>=c&&g&&(l[y]+=g,l[y+1]+=g)}d+=g}),c=t.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=t.map(r[u]+i),d=c-s;if(d<0||d>=n.content.size){a=!0;continue}let p=t.map(r[u+1]+i,-1),f=p-s,{index:h,offset:m}=n.content.findIndex(d),g=n.maybeChild(h);if(g&&m==d&&m+g.nodeSize==f){let y=l[u+2].mapInner(t,g,c+1,r[u]+i+1,o);y!=_?(l[u]=d,l[u+1]=f,l[u+2]=y):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=Qo(l,r,e,t,s,i,o),c=Lt(u,n,0,o);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,p=0;d<c.children.length;d+=3){let f=c.children[d];for(;p<l.length&&l[p]<f;)p+=3;l.splice(p,0,c.children[d],c.children[d+1],c.children[d+2])}}return new R(e.sort(Me),l)}function Qs(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let s=r[n];t.push(new ee(s.from+e,s.to+e,s.type))}return t}function Qo(r,e,t,n,s,i,o){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(n,s,u);d?t.push(d):o.onRemove&&o.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<r.length;a+=3)r[a+1]==-1&&l(r[a+2],e[a]+i+1);return t}function Xs(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,s=null;for(let i=0,o;i<r.length;i++)(o=r[i])&&o.from>t&&o.to<n&&((s||(s=[])).push(o),r[i]=null);return s}function ei(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function Lt(r,e,t,n){let s=[],i=!1;e.forEach((l,a)=>{let u=Xs(r,l,a+t);if(u){i=!0;let c=Lt(u,l,t+a+1,n);c!=_&&s.push(a,a+l.nodeSize,c)}});let o=Qs(i?ei(r):r,-t).sort(Me);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new R(o,s):_}function Me(r,e){return r.from-e.from||r.to-e.to}function Vr(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==n.from){i.to!=n.to&&(e==r&&(e=r.slice()),e[s]=i.copy(i.from,n.to),Bn(e,s+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,i.from),Bn(e,s,n.copy(i.from,n.to)));break}}}return e}function Bn(r,e,t){for(;e<r.length&&Me(t,r[e])>0;)e++;r.splice(e,0,t)}var he={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Xo=typeof navigator<"u"&&/Mac/.test(navigator.platform),el=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var z=0;z<10;z++)he[48+z]=he[96+z]=String(z);for(var z=1;z<=24;z++)he[z+111]="F"+z;for(var z=65;z<=90;z++)he[z]=String.fromCharCode(z+32),qt[z]=String.fromCharCode(z);for(var sr in he)qt.hasOwnProperty(sr)||(qt[sr]=he[sr]);function tl(r){var e=Xo&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||el&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?qt:he)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const rl=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function nl(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,s,i,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))rl?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+a)}return n&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function sl(r){let e=Object.create(null);for(let t in r)e[nl(t)]=r[t];return e}function ir(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function il(r){return new K({props:{handleKeyDown:ti(r)}})}function ti(r){let e=sl(r);return function(t,n){let s=tl(n),i,o=e[ir(s,n)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let l=e[ir(s,n,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(i=he[n.keyCode])&&i!=s){let l=e[ir(i,n)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const ol=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function ri(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const ll=(r,e,t)=>{let n=ri(r,t);if(!n)return!1;let s=$r(n);if(!s){let o=n.blockRange(),l=o&&je(o);return l==null?!1:(e&&e(r.tr.lift(o,l).scrollIntoView()),!0)}let i=s.nodeBefore;if(oi(r,s,e,-1))return!0;if(n.parent.content.size==0&&($e(i,"end")||w.isSelectable(i)))for(let o=n.depth;;o--){let l=Or(r.doc,n.before(o),n.after(o),C.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=r.tr.step(l);a.setSelection($e(i,"end")?D.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):w.create(a.doc,s.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return i.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},al=(r,e,t)=>{let n=ri(r,t);if(!n)return!1;let s=$r(n);return s?ni(r,s,e):!1},ul=(r,e,t)=>{let n=si(r,t);if(!n)return!1;let s=_r(n);return s?ni(r,s,e):!1};function ni(r,e,t){let n=e.nodeBefore,s=n,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=Or(r.doc,i,a,C.empty);if(!u||u.from!=i||u instanceof j&&u.slice.size>=a-i)return!1;if(t){let c=r.tr.step(u);c.setSelection(E.create(c.doc,i)),t(c.scrollIntoView())}return!0}function $e(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const cl=(r,e,t)=>{let{$head:n,empty:s}=r.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;i=$r(n)}let o=i&&i.nodeBefore;return!o||!w.isSelectable(o)?!1:(e&&e(r.tr.setSelection(w.create(r.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function $r(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function si(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const dl=(r,e,t)=>{let n=si(r,t);if(!n)return!1;let s=_r(n);if(!s)return!1;let i=s.nodeAfter;if(oi(r,s,e,1))return!0;if(n.parent.content.size==0&&($e(i,"start")||w.isSelectable(i))){let o=Or(r.doc,n.before(),n.after(),C.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=r.tr.step(o);l.setSelection($e(i,"start")?D.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):w.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},fl=(r,e,t)=>{let{$head:n,empty:s}=r.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;i=_r(n)}let o=i&&i.nodeAfter;return!o||!w.isSelectable(o)?!1:(e&&e(r.tr.setSelection(w.create(r.doc,i.pos)).scrollIntoView()),!0)};function _r(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const pl=(r,e)=>{let t=r.selection,n=t instanceof w,s;if(n){if(t.node.isTextblock||!ge(r.doc,t.from))return!1;s=t.from}else if(s=zt(r.doc,t.from,-1),s==null)return!1;if(e){let i=r.tr.join(s);n&&i.setSelection(w.create(i.doc,s-r.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},hl=(r,e)=>{let t=r.selection,n;if(t instanceof w){if(t.node.isTextblock||!ge(r.doc,t.to))return!1;n=t.to}else if(n=zt(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},ml=(r,e)=>{let{$from:t,$to:n}=r.selection,s=t.blockRange(n),i=s&&je(s);return i==null?!1:(e&&e(r.tr.lift(s,i).scrollIntoView()),!0)},gl=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function ii(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const yl=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let s=t.node(-1),i=t.indexAfter(-1),o=ii(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let l=t.after(),a=r.tr.replaceWith(l,l,o.createAndFill());a.setSelection(D.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},bl=(r,e)=>{let t=r.selection,{$from:n,$to:s}=t;if(t instanceof te||n.parent.inlineContent||s.parent.inlineContent)return!1;let i=ii(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,l=r.tr.insert(o,i.createAndFill());l.setSelection(E.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},Al=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(He(r.doc,i))return e&&e(r.tr.split(i).scrollIntoView()),!0}let n=t.blockRange(),s=n&&je(n);return s==null?!1:(e&&e(r.tr.lift(n,s).scrollIntoView()),!0)},xl=(r,e)=>{let{$from:t,to:n}=r.selection,s,i=t.sharedDepth(n);return i==0?!1:(s=t.before(i),e&&e(r.tr.setSelection(w.create(r.doc,s))),!0)};function Cl(r,e,t){let n=e.nodeBefore,s=e.nodeAfter,i=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||ge(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),!0)}function oi(r,e,t,n){let s=e.nodeBefore,i=e.nodeAfter,o,l,a=s.type.spec.isolating||i.type.spec.isolating;if(!a&&Cl(r,e,t))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,h=b.empty;for(let y=o.length-1;y>=0;y--)h=b.from(o[y].create(null,h));h=b.from(s.copy(h));let m=r.tr.step(new U(e.pos-1,f,e.pos,f,new C(h,1,0),o.length,!0)),g=f+2*o.length;ge(m.doc,g)&&m.join(g),t(m.scrollIntoView())}return!0}let c=i.type.spec.isolating||n>0&&a?null:D.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),p=d&&je(d);if(p!=null&&p>=e.depth)return t&&t(r.tr.lift(d,p).scrollIntoView()),!0;if(u&&$e(i,"start",!0)&&$e(s,"end")){let f=s,h=[];for(;h.push(f),!f.isTextblock;)f=f.lastChild;let m=i,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(f.canReplace(f.childCount,f.childCount,m.content)){if(t){let y=b.empty;for(let S=h.length-1;S>=0;S--)y=b.from(h[S].copy(y));let x=r.tr.step(new U(e.pos-h.length,e.pos+i.nodeSize,e.pos+g,e.pos+i.nodeSize-g,new C(y,h.length,0),0,!0));t(x.scrollIntoView())}return!0}}return!1}function li(r){return function(e,t){let n=e.selection,s=r<0?n.$from:n.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(E.create(e.doc,r<0?s.start(i):s.end(i)))),!0):!1}}const wl=li(-1),El=li(1);function kl(r,e=null){return function(t,n){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),l=o&&Br(o,r,e);return l?(n&&n(t.tr.wrap(o,l).scrollIntoView()),!0):!1}}function On(r,e=null){return function(t,n){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:l}}=t.selection.ranges[i];t.doc.nodesBetween(o,l,(a,u)=>{if(s)return!1;if(!(!a.isTextblock||a.hasMarkup(r,e)))if(a.type==r)s=!0;else{let c=t.doc.resolve(u),d=c.index();s=c.parent.canReplaceWith(d,d+1,r)}})}if(!s)return!1;if(n){let i=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[o];i.setBlockType(l,a,r,e)}n(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Dl(r,e=null){return function(t,n){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(r)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let c=t.doc.resolve(o.start-2);a=new kt(c,c,o.depth),o.endIndex<o.parent.childCount&&(o=new kt(s,t.doc.resolve(i.end(o.depth)),o.depth)),l=!0}let u=Br(a,r,e,o);return u?(n&&n(Sl(t.tr,o,u,l,r).scrollIntoView()),!0):!1}}function Sl(r,e,t,n,s){let i=b.empty;for(let c=t.length-1;c>=0;c--)i=b.from(t[c].type.create(t[c].attrs,i));r.step(new U(e.start-(n?2:0),e.end,e.start,e.end,new C(i,0,0),t.length,!0));let o=0;for(let c=0;c<t.length;c++)t[c].type==s&&(o=c+1);let l=t.length-o,a=e.start+t.length-(n?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,p=!0;c<d;c++,p=!1)!p&&He(r.doc,a,l)&&(r.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return r}function vl(r){return function(e,t){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,o=>o.childCount>0&&o.firstChild.type==r);return i?t?n.node(i.depth-1).type==r?Tl(e,t,r,i):Nl(e,t,i):!0:!1}}function Tl(r,e,t,n){let s=r.tr,i=n.end,o=n.$to.end(n.depth);i<o&&(s.step(new U(i-1,o,i,o,new C(b.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new kt(s.doc.resolve(n.$from.pos),s.doc.resolve(o),n.depth));const l=je(n);if(l==null)return!1;s.lift(n,l);let a=s.mapping.map(i,-1)-1;return ge(s.doc,a)&&s.join(a),e(s.scrollIntoView()),!0}function Nl(r,e,t){let n=r.tr,s=t.parent;for(let f=t.end,h=t.endIndex-1,m=t.startIndex;h>m;h--)f-=s.child(h).nodeSize,n.delete(f-1,f+1);let i=n.doc.resolve(t.start),o=i.nodeAfter;if(n.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==s.childCount,u=i.node(-1),c=i.index(-1);if(!u.canReplace(c+(l?0:1),c+1,o.content.append(a?b.empty:b.from(s))))return!1;let d=i.pos,p=d+o.nodeSize;return n.step(new U(d-(l?1:0),p+(a?1:0),d+1,p-1,new C((l?b.empty:b.from(s.copy(b.empty))).append(a?b.empty:b.from(s.copy(b.empty))),l?0:1,a?0:1),l?0:1)),e(n.scrollIntoView()),!0}function Ml(r){return function(e,t){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,u=>u.childCount>0&&u.firstChild.type==r);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,a=l.child(o-1);if(a.type!=r)return!1;if(t){let u=a.lastChild&&a.lastChild.type==l.type,c=b.from(u?r.create():null),d=new C(b.from(r.create(null,b.from(l.type.create(null,c)))),u?3:1,0),p=i.start,f=i.end;t(e.tr.step(new U(p-(u?3:1),f,p,f,d,1,!0)).scrollIntoView())}return!0}}function _t(r){const{state:e,transaction:t}=r;let{selection:n}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return s},get tr(){return n=t.selection,s=t.doc,i=t.storedMarks,t}}}class Ur{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:s}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:s,state:i}=this,{view:o}=s,l=[],a=!!e,u=e||i.tr,c=()=>(!a&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),l.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(n).map(([p,f])=>[p,(...m)=>{const g=this.buildProps(u,t),y=f(...m)(g);return l.push(y),d}])),run:c};return d}createCan(e){const{rawCommands:t,state:n}=this,s=!1,i=e||n.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([a,u])=>[a,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:n,editor:s,state:i}=this,{view:o}=s,l={tr:e,editor:s,view:o,state:_t({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}function A(r,e,t){return r.config[e]===void 0&&r.parent?A(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?A(r.parent,e,t):null}):r.config[e]}function Ut(r){const e=r.filter(s=>s.type==="extension"),t=r.filter(s=>s.type==="node"),n=r.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function ai(r){const e=[],{nodeExtensions:t,markExtensions:n}=Ut(r),s=[...t,...n],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},a=A(o,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([p,f])=>{e.push({type:d,name:p,attribute:{...i,...f}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=A(o,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const p={...i,...d};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:o.name,name:c,attribute:p})})}),e}function H(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function v(...r){return r.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([s,i])=>{if(!n[s]){n[s]=i;return}if(s==="class"){const l=i?i.split(" "):[],a=n[s]?n[s].split(" "):[],u=l.filter(c=>!a.includes(c));n[s]=[...a,...u].join(" ")}else s==="style"?n[s]=[n[s],i].join("; "):n[s]=i}),n},{})}function Dr(r,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>v(t,n),{})}function Bl(r){return typeof r=="function"}function k(r,e=void 0,...t){return Bl(r)?e?r.bind(e)(...t):r(...t):r}function Ol(r={}){return Object.keys(r).length===0&&r.constructor===Object}function Ll(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function Ln(r,e){return"style"in r?r:{...r,getAttrs:t=>{const n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;const s=e.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(t):Ll(t.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...n,...s}}}}function qn(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&Ol(t)?!1:t!=null))}function ui(r,e){var t;const n=ai(r),{nodeExtensions:s,markExtensions:i}=Ut(r),o=(t=s.find(u=>A(u,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(s.map(u=>{const c=n.filter(y=>y.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},p=r.reduce((y,x)=>{const S=A(x,"extendNodeSchema",d);return{...y,...S?S(u):{}}},{}),f=qn({...p,content:k(A(u,"content",d)),marks:k(A(u,"marks",d)),group:k(A(u,"group",d)),inline:k(A(u,"inline",d)),atom:k(A(u,"atom",d)),selectable:k(A(u,"selectable",d)),draggable:k(A(u,"draggable",d)),code:k(A(u,"code",d)),whitespace:k(A(u,"whitespace",d)),defining:k(A(u,"defining",d)),isolating:k(A(u,"isolating",d)),attrs:Object.fromEntries(c.map(y=>{var x;return[y.name,{default:(x=y==null?void 0:y.attribute)===null||x===void 0?void 0:x.default}]}))}),h=k(A(u,"parseHTML",d));h&&(f.parseDOM=h.map(y=>Ln(y,c)));const m=A(u,"renderHTML",d);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:Dr(y,c)}));const g=A(u,"renderText",d);return g&&(f.toText=g),[u.name,f]})),a=Object.fromEntries(i.map(u=>{const c=n.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},p=r.reduce((g,y)=>{const x=A(y,"extendMarkSchema",d);return{...g,...x?x(u):{}}},{}),f=qn({...p,inclusive:k(A(u,"inclusive",d)),excludes:k(A(u,"excludes",d)),group:k(A(u,"group",d)),spanning:k(A(u,"spanning",d)),code:k(A(u,"code",d)),attrs:Object.fromEntries(c.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),h=k(A(u,"parseHTML",d));h&&(f.parseDOM=h.map(g=>Ln(g,c)));const m=A(u,"renderHTML",d);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:Dr(g,c)})),[u.name,f]}));return new bs({topNode:o,nodes:l,marks:a})}function or(r,e){return e.nodes[r]||e.marks[r]||null}function Fn(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}const ql=(r,e=500)=>{let t="";const n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(s,i,o,l)=>{var a,u;const c=((u=(a=s.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:s,pos:i,parent:o,index:l}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,n-i))}),t};function jr(r){return Object.prototype.toString.call(r)==="[object RegExp]"}class jt{constructor(e){this.find=e.find,this.handler=e.handler}}const Fl=(r,e)=>{if(jr(e))return e.exec(r);const t=e(r);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function ft(r){var e;const{editor:t,from:n,to:s,text:i,rules:o,plugin:l}=r,{view:a}=t;if(a.composing)return!1;const u=a.state.doc.resolve(n);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let c=!1;const d=ql(u)+i;return o.forEach(p=>{if(c)return;const f=Fl(d,p.find);if(!f)return;const h=a.state.tr,m=_t({state:a.state,transaction:h}),g={from:n-(f[0].length-i.length),to:s},{commands:y,chain:x,can:S}=new Ur({editor:t,state:m});p.handler({state:m,range:g,match:f,commands:y,chain:x,can:S})===null||!h.steps.length||(h.setMeta(l,{transform:h,from:n,to:s,text:i}),a.dispatch(h),c=!0)}),c}function Rl(r){const{editor:e,rules:t}=r,n=new K({state:{init(){return null},apply(s,i){const o=s.getMeta(n);if(o)return o;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:u,text:c}=l,d=u+c.length;ft({editor:e,from:u,to:d,text:c,rules:t,plugin:n})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,l){return ft({editor:e,from:i,to:o,text:l,rules:t,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&ft({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?ft({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function Il(r){return typeof r=="number"}class Pl{constructor(e){this.find=e.find,this.handler=e.handler}}const zl=(r,e,t)=>{if(jr(e))return[...r.matchAll(e)];const n=e(r,t);return n?n.map(s=>{const i=[s.text];return i.index=s.index,i.input=r,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function Hl(r){const{editor:e,state:t,from:n,to:s,rule:i,pasteEvent:o,dropEvent:l}=r,{commands:a,chain:u,can:c}=new Ur({editor:e,state:t}),d=[];return t.doc.nodesBetween(n,s,(f,h)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(n,h),g=Math.min(s,h+f.content.size),y=f.textBetween(m-h,g-h,void 0,"￼");zl(y,i.find,o).forEach(S=>{if(S.index===void 0)return;const M=m+S.index+1,L=M+S[0].length,B={from:t.tr.mapping.map(M),to:t.tr.mapping.map(L)},ne=i.handler({state:t,range:B,match:S,commands:a,chain:u,can:c,pasteEvent:o,dropEvent:l});d.push(ne)})}),d.every(f=>f!==null)}const Vl=r=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",r),t};function $l(r){const{editor:e,rules:t}=r;let n=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const a=({state:c,from:d,to:p,rule:f,pasteEvt:h})=>{const m=c.tr,g=_t({state:c,transaction:m});if(!(!Hl({editor:e,state:g,from:Math.max(d-1,0),to:p.b-1,rule:f,pasteEvent:h,dropEvent:l})||!m.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return t.map(c=>new K({view(d){const p=f=>{var h;n=!((h=d.dom.parentElement)===null||h===void 0)&&h.contains(f.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",p),{destroy(){window.removeEventListener("dragstart",p)}}},props:{handleDOMEvents:{drop:(d,p)=>(i=n===d.dom.parentElement,l=p,!1),paste:(d,p)=>{var f;const h=(f=p.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=p,s=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(d,p,f)=>{const h=d[0],m=h.getMeta("uiEvent")==="paste"&&!s,g=h.getMeta("uiEvent")==="drop"&&!i,y=h.getMeta("applyPasteRules"),x=!!y;if(!m&&!g&&!x)return;if(x){const{from:L,text:B}=y,ne=L+B.length,se=Vl(B);return a({rule:c,state:f,from:L,to:{b:ne},pasteEvt:se})}const S=p.doc.content.findDiffStart(f.doc.content),M=p.doc.content.findDiffEnd(f.doc.content);if(!(!Il(S)||!M||S===M.b))return a({rule:c,state:f,from:S,to:M,pasteEvt:o})}}))}function _l(r){const e=r.filter((t,n)=>r.indexOf(t)!==n);return Array.from(new Set(e))}class Pe{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Pe.resolve(e),this.schema=ui(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Pe.sort(Pe.flatten(e)),n=_l(t.map(s=>s.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},s=A(t,"addExtensions",n);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((n,s)=>{const i=A(n,"priority")||100,o=A(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:or(t.name,this.schema)},s=A(t,"addCommands",n);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Pe.sort([...this.extensions].reverse()),n=[],s=[],i=t.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:or(o.name,this.schema)},a=[],u=A(o,"addKeyboardShortcuts",l);let c={};if(o.type==="mark"&&A(o,"exitable",l)&&(c.ArrowRight=()=>Z.handleExit({editor:e,mark:o})),u){const m=Object.fromEntries(Object.entries(u()).map(([g,y])=>[g,()=>y({editor:e})]));c={...c,...m}}const d=il(c);a.push(d);const p=A(o,"addInputRules",l);Fn(o,e.options.enableInputRules)&&p&&n.push(...p());const f=A(o,"addPasteRules",l);Fn(o,e.options.enablePasteRules)&&f&&s.push(...f());const h=A(o,"addProseMirrorPlugins",l);if(h){const m=h();a.push(...m)}return a}).flat();return[Rl({editor:e,rules:n}),...$l({editor:e,rules:s}),...i]}get attributes(){return ai(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ut(this.extensions);return Object.fromEntries(t.filter(n=>!!A(n,"addNodeView")).map(n=>{const s=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:e,type:H(n.name,this.schema)},o=A(n,"addNodeView",i);if(!o)return[];const l=(a,u,c,d)=>{const p=Dr(a,s);return o()({editor:e,node:a,getPos:c,decorations:d,HTMLAttributes:p,extension:n})};return[n.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:or(e.name,this.schema)};e.type==="mark"&&(!((t=k(A(e,"keepOnSplit",n)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=A(e,"onBeforeCreate",n),i=A(e,"onCreate",n),o=A(e,"onUpdate",n),l=A(e,"onSelectionUpdate",n),a=A(e,"onTransaction",n),u=A(e,"onFocus",n),c=A(e,"onBlur",n),d=A(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}function Ul(r){return Object.prototype.toString.call(r).slice(8,-1)}function pt(r){return Ul(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function Jt(r,e){const t={...r};return pt(r)&&pt(e)&&Object.keys(e).forEach(n=>{pt(e[n])&&pt(r[n])?t[n]=Jt(r[n],e[n]):t[n]=e[n]}),t}class V{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(A(this,"addOptions",{name:this.name}))),this.storage=k(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new V(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Jt(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new V({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=k(A(t,"addOptions",{name:t.name})),t.storage=k(A(t,"addStorage",{name:t.name,options:t.options})),t}}function jl(r,e,t){const{from:n,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=t||{};let l="";return r.nodesBetween(n,s,(a,u,c,d)=>{var p;a.isBlock&&u>n&&(l+=i);const f=o==null?void 0:o[a.type.name];if(f)return c&&(l+=f({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(p=a==null?void 0:a.text)===null||p===void 0?void 0:p.slice(Math.max(n,u)-u,s-u))}),l}function Jl(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}V.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new K({key:new ae("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(c=>c.$from.pos)),l=Math.max(...i.map(c=>c.$to.pos)),a=Jl(t);return jl(n,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}});const Gl=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Kl=(r=!1)=>({commands:e})=>e.setContent("",r),Wl=()=>({state:r,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:s}=n;return t&&s.forEach(({$from:i,$to:o})=>{r.doc.nodesBetween(i.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),p=u.resolve(c.map(a+l.nodeSize)),f=d.blockRange(p);if(!f)return;const h=je(f);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,m)}(h||h===0)&&e.lift(f,h)})}),!0},Yl=r=>e=>r(e),Zl=()=>({state:r,dispatch:e})=>bl(r,e),Ql=(r,e)=>({editor:t,tr:n})=>{const{state:s}=t,i=s.doc.slice(r.from,r.to);n.deleteRange(r.from,r.to);const o=n.mapping.map(e);return n.insert(o,i.content),n.setSelection(new E(n.doc.resolve(o-1))),!0},Xl=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;const s=r.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===n.type){if(e){const l=s.before(i),a=s.after(i);r.delete(l,a).scrollIntoView()}return!0}return!1},ea=r=>({tr:e,state:t,dispatch:n})=>{const s=H(r,t.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(n){const a=i.before(o),u=i.after(o);e.delete(a,u).scrollIntoView()}return!0}return!1},ta=r=>({tr:e,dispatch:t})=>{const{from:n,to:s}=r;return t&&e.delete(n,s),!0},ra=()=>({state:r,dispatch:e})=>ol(r,e),na=()=>({commands:r})=>r.keyboardShortcut("Enter"),sa=()=>({state:r,dispatch:e})=>yl(r,e);function Ft(r,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>t.strict?e[s]===r[s]:jr(e[s])?e[s].test(r[s]):e[s]===r[s]):!0}function Sr(r,e,t={}){return r.find(n=>n.type===e&&Ft(n.attrs,t))}function ia(r,e,t={}){return!!Sr(r,e,t)}function Jr(r,e,t={}){if(!r||!e)return;let n=r.parent.childAfter(r.parentOffset);if(r.parentOffset===n.offset&&n.offset!==0&&(n=r.parent.childBefore(r.parentOffset)),!n.node)return;const s=Sr([...n.node.marks],e,t);if(!s)return;let i=n.index,o=r.start()+n.offset,l=i+1,a=o+n.node.nodeSize;for(Sr([...n.node.marks],e,t);i>0&&s.isInSet(r.parent.child(i-1).marks);)i-=1,o-=r.parent.child(i).nodeSize;for(;l<r.parent.childCount&&ia([...r.parent.child(l).marks],e,t);)a+=r.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function Ae(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}const oa=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const i=Ae(r,n.schema),{doc:o,selection:l}=t,{$from:a,from:u,to:c}=l;if(s){const d=Jr(a,i,e);if(d&&d.from<=u&&d.to>=c){const p=E.create(o,d.from,d.to);t.setSelection(p)}}return!0},la=r=>e=>{const t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function ci(r){return r instanceof E}function ke(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function aa(r,e=null){if(!e)return null;const t=D.atStart(r),n=D.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;const s=t.from,i=n.to;return e==="all"?E.create(r,ke(0,s,i),ke(r.content.size,s,i)):E.create(r,ke(e,s,i),ke(e,s,i))}function Gr(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ua=(r=null,e={})=>({editor:t,view:n,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{Gr()&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(i&&r===null&&!ci(t.state.selection))return o(),!0;const l=aa(s.doc,r)||t.state.selection,a=t.state.selection.eq(l);return i&&(a||s.setSelection(l),a&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},ca=(r,e)=>t=>r.every((n,s)=>e(n,{...t,index:s})),da=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),di=r=>{const e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){const n=e[t];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?r.removeChild(n):n.nodeType===1&&di(n)}return r};function ht(r){const e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return di(t)}function Rt(r,e,t){t={slice:!0,parseOptions:{},...t};const n=typeof r=="object"&&r!==null,s=typeof r=="string";if(n)try{if(Array.isArray(r)&&r.length>0)return b.fromArray(r.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(r);return t.errorOnInvalidContent&&o.check(),o}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",i),Rt("",e,t)}if(s){if(t.errorOnInvalidContent){let o=!1,l="";const a=new bs({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?Te.fromSchema(a).parseSlice(ht(r),t.parseOptions):Te.fromSchema(a).parse(ht(r),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=Te.fromSchema(e);return t.slice?i.parseSlice(ht(r),t.parseOptions).content:i.parse(ht(r),t.parseOptions)}return Rt("",e,t)}function fa(r,e,t){const n=r.steps.length-1;if(n<e)return;const s=r.steps[n];if(!(s instanceof j||s instanceof U))return;const i=r.mapping.maps[n];let o=0;i.forEach((l,a,u,c)=>{o===0&&(o=c)}),r.setSelection(D.near(r.doc.resolve(o),t))}const pa=r=>!("type"in r),ha=(r,e,t)=>({tr:n,dispatch:s,editor:i})=>{var o;if(s){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let l;try{l=Rt(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:i.options.enableContentCheck})}catch(h){return i.emit("contentError",{editor:i,error:h,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:a,to:u}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},c=!0,d=!0;if((pa(l)?l:[l]).forEach(h=>{h.check(),c=c?h.isText&&h.marks.length===0:!1,d=d?h.isBlock:!1}),a===u&&d){const{parent:h}=n.doc.resolve(a);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(a-=1,u+=1)}let f;c?(Array.isArray(e)?f=e.map(h=>h.text||"").join(""):typeof e=="object"&&e&&e.text?f=e.text:f=e,n.insertText(f,a,u)):(f=l,n.replaceWith(a,u,f)),t.updateSelection&&fa(n,n.steps.length-1,-1),t.applyInputRules&&n.setMeta("applyInputRules",{from:a,text:f}),t.applyPasteRules&&n.setMeta("applyPasteRules",{from:a,text:f})}return!0},ma=()=>({state:r,dispatch:e})=>pl(r,e),ga=()=>({state:r,dispatch:e})=>hl(r,e),ya=()=>({state:r,dispatch:e})=>ll(r,e),ba=()=>({state:r,dispatch:e})=>dl(r,e),Aa=()=>({state:r,dispatch:e,tr:t})=>{try{const n=zt(r.doc,r.selection.$from.pos,-1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},xa=()=>({state:r,dispatch:e,tr:t})=>{try{const n=zt(r.doc,r.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},Ca=()=>({state:r,dispatch:e})=>al(r,e),wa=()=>({state:r,dispatch:e})=>ul(r,e);function fi(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ea(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,s,i,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))Gr()||fi()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return n&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const ka=r=>({editor:e,view:t,tr:n,dispatch:s})=>{const i=Ea(r).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,l))});return a==null||a.steps.forEach(u=>{const c=u.map(n.mapping);c&&s&&n.maybeStep(c)}),!0};function Kr(r,e,t={}){const{from:n,to:s,empty:i}=r.selection,o=e?H(e,r.schema):null,l=[];r.doc.nodesBetween(n,s,(d,p)=>{if(d.isText)return;const f=Math.max(n,p),h=Math.min(s,p+d.nodeSize);l.push({node:d,from:f,to:h})});const a=s-n,u=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Ft(d.node.attrs,t,{strict:!1}));return i?!!u.length:u.reduce((d,p)=>d+p.to-p.from,0)>=a}const Da=(r,e={})=>({state:t,dispatch:n})=>{const s=H(r,t.schema);return Kr(t,s,e)?ml(t,n):!1},Sa=()=>({state:r,dispatch:e})=>Al(r,e),va=r=>({state:e,dispatch:t})=>{const n=H(r,e.schema);return vl(n)(e,t)},Ta=()=>({state:r,dispatch:e})=>gl(r,e);function pi(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function Rn(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,s)=>(t.includes(s)||(n[s]=r[s]),n),{})}const Na=(r,e)=>({tr:t,state:n,dispatch:s})=>{let i=null,o=null;const l=pi(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(i=H(r,n.schema)),l==="mark"&&(o=Ae(r,n.schema)),s&&t.selection.ranges.forEach(a=>{n.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{i&&i===u.type&&t.setNodeMarkup(c,void 0,Rn(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&t.addMark(c,c+u.nodeSize,o.create(Rn(d.attrs,e)))})})}),!0):!1},Ma=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),Ba=()=>({tr:r,commands:e})=>e.setTextSelection({from:0,to:r.doc.content.size}),Oa=()=>({state:r,dispatch:e})=>cl(r,e),La=()=>({state:r,dispatch:e})=>fl(r,e),qa=()=>({state:r,dispatch:e})=>xl(r,e),Fa=()=>({state:r,dispatch:e})=>El(r,e),Ra=()=>({state:r,dispatch:e})=>wl(r,e);function Ia(r,e,t={},n={}){return Rt(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:n.errorOnInvalidContent})}const Pa=(r,e=!1,t={},n={})=>({editor:s,tr:i,dispatch:o,commands:l})=>{var a,u;const{doc:c}=i;if(t.preserveWhitespace!=="full"){const d=Ia(r,s.schema,t,{errorOnInvalidContent:(a=n.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck});return o&&i.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return o&&i.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},r,{parseOptions:t,errorOnInvalidContent:(u=n.errorOnInvalidContent)!==null&&u!==void 0?u:s.options.enableContentCheck})};function Gt(r,e){const t=Ae(e,r.schema),{from:n,to:s,empty:i}=r.selection,o=[];i?(r.storedMarks&&o.push(...r.storedMarks),o.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,s,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function za(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Ha(r,e){for(let t=r.depth;t>0;t-=1){const n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function Wr(r){return e=>Ha(e.$from,r)}function Va(r,e){const t=Pe.resolve(r);return ui(t,e)}function hi(r,e,t){const n=[];return r===e?t.resolve(r).marks().forEach(s=>{const i=t.resolve(r),o=Jr(i,s.type);o&&n.push({mark:s,...o})}):t.nodesBetween(r,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),n}function bt(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const s=r.find(i=>i.type===e&&i.name===n);return s?s.attribute.keepOnSplit:!1}))}function $a(r,e,t={}){const{empty:n,ranges:s}=r.selection,i=e?Ae(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>Ft(d.attrs,t,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:d,$to:p})=>{const f=d.pos,h=p.pos;r.doc.nodesBetween(f,h,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),x=Math.min(h,g+m.nodeSize),S=x-y;o+=S,l.push(...m.marks.map(M=>({mark:M,from:y,to:x})))})}),o===0)return!1;const a=l.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>Ft(d.mark.attrs,t,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),u=l.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,p)=>d+p.to-p.from,0);return(a>0?a+u:a)>=o}function In(r,e){const{nodeExtensions:t}=Ut(e),n=t.find(o=>o.name===r);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},i=k(A(n,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function mi(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var n;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((n=r.text)!==null&&n!==void 0?n:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let s=!0;return r.content.forEach(i=>{s!==!1&&(mi(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function _a(r){return r instanceof w}function Ua(r,e,t){var n;const{selection:s}=e;let i=null;if(ci(s)&&(i=s.$cursor),i){const l=(n=r.storedMarks)!==null&&n!==void 0?n:i.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:l,$to:a})=>{let u=l.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(l.pos,a.pos,(c,d,p)=>{if(u)return!1;if(c.isInline){const f=!p||p.type.allowsMarkType(t),h=!!t.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(t));u=f&&h}return!u}),u})}const ja=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const{selection:i}=t,{empty:o,ranges:l}=i,a=Ae(r,n.schema);if(s)if(o){const u=Gt(n,a);t.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;n.doc.nodesBetween(c,d,(p,f)=>{const h=Math.max(f,c),m=Math.min(f+p.nodeSize,d);p.marks.find(y=>y.type===a)?p.marks.forEach(y=>{a===y.type&&t.addMark(h,m,a.create({...y.attrs,...e}))}):t.addMark(h,m,a.create(e))})});return Ua(n,t,a)},Ja=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),Ga=(r,e={})=>({state:t,dispatch:n,chain:s})=>{const i=H(r,t.schema);return i.isTextblock?s().command(({commands:o})=>On(i,e)(t)?!0:o.clearNodes()).command(({state:o})=>On(i,e)(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ka=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,s=ke(r,0,n.content.size),i=w.create(n,s);e.setSelection(i)}return!0},Wa=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:s,to:i}=typeof r=="number"?{from:r,to:r}:r,o=E.atStart(n).from,l=E.atEnd(n).to,a=ke(s,o,l),u=ke(i,o,l),c=E.create(n,a,u);e.setSelection(c)}return!0},Ya=r=>({state:e,dispatch:t})=>{const n=H(r,e.schema);return Ml(n)(e,t)};function Pn(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const n=t.filter(s=>e==null?void 0:e.includes(s.type.name));r.tr.ensureMarks(n)}}const Za=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:s})=>{const{selection:i,doc:o}=e,{$from:l,$to:a}=i,u=s.extensionManager.attributes,c=bt(u,l.node().type.name,l.node().attrs);if(i instanceof w&&i.node.isBlock)return!l.parentOffset||!He(o,l.pos)?!1:(n&&(r&&Pn(t,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,p=l.depth===0?void 0:za(l.node(-1).contentMatchAt(l.indexAfter(-1)));let f=d&&p?[{type:p,attrs:c}]:void 0,h=He(e.doc,e.mapping.map(l.pos),1,f);if(!f&&!h&&He(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(h=!0,f=p?[{type:p,attrs:c}]:void 0),n){if(h&&(i instanceof E&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,f),p&&!d&&!l.parentOffset&&l.parent.type!==p)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}r&&Pn(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return h},Qa=(r,e={})=>({tr:t,state:n,dispatch:s,editor:i})=>{var o;const l=H(r,n.schema),{$from:a,$to:u}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const p=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(s){let y=b.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let se=a.depth-x;se>=a.depth-3;se-=1)y=b.from(a.node(se).copy(y));const S=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,M={...bt(p,a.node().type.name,a.node().attrs),...e},L=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(M))||void 0;y=y.append(b.from(l.createAndFill(null,L)||void 0));const B=a.before(a.depth-(x-1));t.replace(B,a.after(-S),new C(y,4-x,0));let ne=-1;t.doc.nodesBetween(B,t.doc.content.size,(se,Bi)=>{if(ne>-1)return!1;se.isTextblock&&se.content.size===0&&(ne=Bi+1)}),ne>-1&&t.setSelection(E.near(t.doc.resolve(ne))),t.scrollIntoView()}return!0}const f=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,h={...bt(p,d.type.name,d.attrs),...e},m={...bt(p,a.node().type.name,a.node().attrs),...e};t.delete(a.pos,u.pos);const g=f?[{type:l,attrs:h},{type:f,attrs:m}]:[{type:l,attrs:h}];if(!He(t.doc,a.pos,2))return!1;if(s){const{selection:y,storedMarks:x}=n,{splittableMarks:S}=i.extensionManager,M=x||y.$to.parentOffset&&y.$from.marks();if(t.split(a.pos,2,g).scrollIntoView(),!M||!s)return!0;const L=M.filter(B=>S.includes(B.type.name));t.ensureMarks(L)}return!0},lr=(r,e)=>{const t=Wr(o=>o.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===(s==null?void 0:s.type)&&ge(r.doc,t.pos)&&r.join(t.pos),!0},ar=(r,e)=>{const t=Wr(o=>o.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===(s==null?void 0:s.type)&&ge(r.doc,n)&&r.join(n),!0},Xa=(r,e,t,n={})=>({editor:s,tr:i,state:o,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:p}=s.extensionManager,f=H(r,o.schema),h=H(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:x}=m,S=y.blockRange(x),M=g||m.$to.parentOffset&&m.$from.marks();if(!S)return!1;const L=Wr(B=>In(B.type.name,d))(m);if(S.depth>=1&&L&&S.depth-L.depth<=1){if(L.node.type===f)return u.liftListItem(h);if(In(L.node.type.name,d)&&f.validContent(L.node.content)&&l)return a().command(()=>(i.setNodeMarkup(L.pos,f),!0)).command(()=>lr(i,f)).command(()=>ar(i,f)).run()}return!t||!M||!l?a().command(()=>c().wrapInList(f,n)?!0:u.clearNodes()).wrapInList(f,n).command(()=>lr(i,f)).command(()=>ar(i,f)).run():a().command(()=>{const B=c().wrapInList(f,n),ne=M.filter(se=>p.includes(se.type.name));return i.ensureMarks(ne),B?!0:u.clearNodes()}).wrapInList(f,n).command(()=>lr(i,f)).command(()=>ar(i,f)).run()},eu=(r,e={},t={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,o=Ae(r,n.schema);return $a(n,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},tu=(r,e,t={})=>({state:n,commands:s})=>{const i=H(r,n.schema),o=H(e,n.schema);return Kr(n,i,t)?s.setNode(o):s.setNode(i,t)},ru=(r,e={})=>({state:t,commands:n})=>{const s=H(r,t.schema);return Kr(t,s,e)?n.lift(s):n.wrapIn(s,e)},nu=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let n=0;n<t.length;n+=1){const s=t[n];let i;if(s.spec.isInputRules&&(i=s.getState(r))){if(e){const o=r.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,r.schema.text(i.text,a))}else o.delete(i.from,i.to)}return!0}}return!1},su=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:n,ranges:s}=t;return n||e&&s.forEach(i=>{r.removeMark(i.$from.pos,i.$to.pos)}),!0},iu=(r,e={})=>({tr:t,state:n,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=t,a=Ae(r,n.schema),{$from:u,empty:c,ranges:d}=l;if(!s)return!0;if(c&&o){let{from:p,to:f}=l;const h=(i=u.marks().find(g=>g.type===a))===null||i===void 0?void 0:i.attrs,m=Jr(u,a,h);m&&(p=m.from,f=m.to),t.removeMark(p,f,a)}else d.forEach(p=>{t.removeMark(p.$from.pos,p.$to.pos,a)});return t.removeStoredMark(a),!0},ou=(r,e={})=>({tr:t,state:n,dispatch:s})=>{let i=null,o=null;const l=pi(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(i=H(r,n.schema)),l==="mark"&&(o=Ae(r,n.schema)),s&&t.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;n.doc.nodesBetween(u,c,(d,p)=>{i&&i===d.type&&t.setNodeMarkup(p,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(f=>{if(o===f.type){const h=Math.max(p,u),m=Math.min(p+d.nodeSize,c);t.addMark(h,m,o.create({...f.attrs,...e}))}})})}),!0):!1},lu=(r,e={})=>({state:t,dispatch:n})=>{const s=H(r,t.schema);return kl(s,e)(t,n)},au=(r,e={})=>({state:t,dispatch:n})=>{const s=H(r,t.schema);return Dl(s,e)(t,n)};var uu=Object.freeze({__proto__:null,blur:Gl,clearContent:Kl,clearNodes:Wl,command:Yl,createParagraphNear:Zl,cut:Ql,deleteCurrentNode:Xl,deleteNode:ea,deleteRange:ta,deleteSelection:ra,enter:na,exitCode:sa,extendMarkRange:oa,first:la,focus:ua,forEach:ca,insertContent:da,insertContentAt:ha,joinBackward:ya,joinDown:ga,joinForward:ba,joinItemBackward:Aa,joinItemForward:xa,joinTextblockBackward:Ca,joinTextblockForward:wa,joinUp:ma,keyboardShortcut:ka,lift:Da,liftEmptyBlock:Sa,liftListItem:va,newlineInCode:Ta,resetAttributes:Na,scrollIntoView:Ma,selectAll:Ba,selectNodeBackward:Oa,selectNodeForward:La,selectParentNode:qa,selectTextblockEnd:Fa,selectTextblockStart:Ra,setContent:Pa,setMark:ja,setMeta:Ja,setNode:Ga,setNodeSelection:Ka,setTextSelection:Wa,sinkListItem:Ya,splitBlock:Za,splitListItem:Qa,toggleList:Xa,toggleMark:eu,toggleNode:tu,toggleWrap:ru,undoInputRule:nu,unsetAllMarks:su,unsetMark:iu,updateAttributes:ou,wrapIn:lu,wrapInList:au});V.create({name:"commands",addCommands(){return{...uu}}});V.create({name:"editable",addProseMirrorPlugins(){return[new K({key:new ae("editable"),props:{editable:()=>this.editor.options.editable}})]}});V.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new K({key:new ae("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}});V.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:p,parent:f}=d,h=d.parent.isTextblock&&p>0?l.doc.resolve(p-1):d,m=h.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&h.parent.childCount===1?g===d.pos:D.atStart(u).from===p;return!c||!f.type.isTextblock||f.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},i={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Gr()||fi()?i:s},addProseMirrorPlugins(){return[new K({key:new ae("clearDocument"),appendTransaction:(r,e,t)=>{if(!(r.some(h=>h.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:s,from:i,to:o}=e.selection,l=D.atStart(e.doc).from,a=D.atEnd(e.doc).to;if(s||!(i===l&&o===a)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,p=_t({state:t,transaction:d}),{commands:f}=new Ur({editor:this.editor,state:p});if(f.clearNodes(),!!d.steps.length)return d}})]}});V.create({name:"tabindex",addProseMirrorPlugins(){return[new K({key:new ae("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function _e(r){return new jt({find:r.find,handler:({state:e,range:t,match:n})=>{const s=k(r.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:i}=e,o=n[n.length-1],l=n[0];if(o){const a=l.search(/\S/),u=t.from+l.indexOf(o),c=u+o.length;if(hi(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===r.type&&m!==f.mark.type)).filter(f=>f.to>u).length)return null;c<t.to&&i.delete(c,t.to),u>t.from&&i.delete(t.from+a,u);const p=t.from+a+o.length;i.addMark(t.from+a,p,r.type.create(s||{})),i.removeStoredMark(r.type)}}})}function gi(r){return new jt({find:r.find,handler:({state:e,range:t,match:n})=>{const s=k(r.getAttributes,void 0,n)||{},{tr:i}=e,o=t.from;let l=t.to;const a=r.type.create(s);if(n[1]){const u=n[0].lastIndexOf(n[1]);let c=o+u;c>l?c=l:l=c+n[1].length;const d=n[0][n[0].length-1];i.insertText(d,o+n[0].length-1),i.replaceWith(c,l,a)}else if(n[0]){const u=r.type.isInline?o:o-1;i.insert(u,r.type.create(s)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()}})}function vr(r){return new jt({find:r.find,handler:({state:e,range:t,match:n})=>{const s=e.doc.resolve(t.from),i=k(r.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,i)}})}function it(r){return new jt({find:r.find,handler:({state:e,range:t,match:n,chain:s})=>{const i=k(r.getAttributes,void 0,n)||{},o=e.tr.delete(t.from,t.to),a=o.doc.resolve(t.from).blockRange(),u=a&&Br(a,r.type,i);if(!u)return null;if(o.wrap(a,u),r.keepMarks&&r.editor){const{selection:d,storedMarks:p}=e,{splittableMarks:f}=r.editor.extensionManager,h=p||d.$to.parentOffset&&d.$from.marks();if(h){const m=h.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(r.keepAttributes){const d=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const c=o.doc.resolve(t.from-1).nodeBefore;c&&c.type===r.type&&ge(o.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,c))&&o.join(t.from-1)}})}class Z{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(A(this,"addOptions",{name:this.name}))),this.storage=k(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Z(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Jt(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Z(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=k(A(t,"addOptions",{name:t.name})),t.storage=k(A(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const a=o.find(u=>(u==null?void 0:u.type.name)===t.name);return a&&n.removeStoredMark(a),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}}class F{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(A(this,"addOptions",{name:this.name}))),this.storage=k(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new F(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Jt(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new F(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=k(A(t,"addOptions",{name:t.name})),t.storage=k(A(t,"addStorage",{name:t.name,options:t.options})),t}}function Ue(r){return new Pl({find:r.find,handler:({state:e,range:t,match:n,pasteEvent:s})=>{const i=k(r.getAttributes,void 0,n,s);if(i===!1||i===null)return null;const{tr:o}=e,l=n[n.length-1],a=n[0];let u=t.to;if(l){const c=a.search(/\S/),d=t.from+a.indexOf(l),p=d+l.length;if(hi(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===r.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;p<t.to&&o.delete(p,t.to),d>t.from&&o.delete(t.from+c,d),u=t.from+c+l.length,o.addMark(t.from+c,u,r.type.create(i||{})),o.removeStoredMark(r.type)}}})}const cu=/^\s*>\s$/,du=F.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return["blockquote",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[it({find:cu,type:this.type})]}}),fu=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,pu=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,hu=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,mu=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,gu=Z.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[_e({find:fu,type:this.type}),_e({find:hu,type:this.type})]},addPasteRules(){return[Ue({find:pu,type:this.type}),Ue({find:mu,type:this.type})]}}),yu=F.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",v(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),zn=Z.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",v(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:r,commands:e})=>{const t=Gt(r,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),Hn=/^\s*([-+*])\s$/,bu=F.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",v(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yu.name,this.editor.getAttributes(zn.name)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=it({find:Hn,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=it({find:Hn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(zn.name),editor:this.editor})),[r]}}),Au=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,xu=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Cu=Z.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[_e({find:Au,type:this.type})]},addPasteRules(){return[Ue({find:xu,type:this.type})]}}),wu=/^```([a-z]+)?[\s\n]$/,Eu=/^~~~([a-z]+)?[\s\n]$/,ku=F.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=r.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",v(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:n,empty:s}=t;if(!s||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!i||!o?!1:r.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:n}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:n.nodeAt(l)?r.commands.command(({tr:u})=>(u.setSelection(D.near(n.resolve(l))),!0)):r.commands.exitCode()}}},addInputRules(){return[vr({find:wu,type:this.type,getAttributes:r=>({language:r[1]})}),vr({find:Eu,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new K({key:new ae("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:o,schema:l}=r.state,a=l.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(E.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),r.dispatch(o),!0}}})]}}),Du=F.create({name:"doc",topNode:!0,content:"block+"});function Su(r={}){return new K({view(e){return new vu(e,r)}})}class vu{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n;if(t){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=l?c.bottom:c.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!n){let l=this.editorView.coordsAtPos(this.cursorPos);n={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,o=-pageYOffset;else{let l=s.getBoundingClientRect();i=l.left-s.scrollLeft,o=l.top-s.scrollTop}this.element.style.left=n.left-i+"px",this.element.style.top=n.top-o+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=n&&n.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=vs(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Tu=V.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Su(this.options)]}});class O extends D{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return O.valid(n)?new O(n):D.near(n)}content(){return C.empty}eq(e){return e instanceof O&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new O(e.resolve(t.pos))}getBookmark(){return new Yr(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Nu(e)||!Mu(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&O.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(t>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let a=e.doc.resolve(s);if(O.valid(a))return a}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!w.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),n=!1;continue e}break}i=o,s+=t;let l=e.doc.resolve(s);if(O.valid(l))return l}return null}}}O.prototype.visible=!1;O.findFrom=O.findGapCursorFrom;D.jsonID("gapcursor",O);class Yr{constructor(e){this.pos=e}map(e){return new Yr(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return O.valid(t)?new O(t):D.near(t)}}function Nu(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Mu(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Bu(){return new K({props:{decorations:Fu,createSelectionBetween(r,e,t){return e.pos==t.pos&&O.valid(t)?new O(t):null},handleClick:Lu,handleKeyDown:Ou,handleDOMEvents:{beforeinput:qu}}})}const Ou=ti({ArrowLeft:mt("horiz",-1),ArrowRight:mt("horiz",1),ArrowUp:mt("vert",-1),ArrowDown:mt("vert",1)});function mt(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,i){let o=n.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof E){if(!i.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=n.doc.resolve(e>0?l.after():l.before())}let u=O.findGapCursorFrom(l,e,a);return u?(s&&s(n.tr.setSelection(new O(u))),!0):!1}}function Lu(r,e,t){if(!r||!r.editable)return!1;let n=r.state.doc.resolve(e);if(!O.valid(n))return!1;let s=r.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&w.isSelectable(r.state.doc.nodeAt(s.inside))?!1:(r.dispatch(r.state.tr.setSelection(new O(n))),!0)}function qu(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof O))return!1;let{$from:t}=r.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;let s=b.empty;for(let o=n.length-1;o>=0;o--)s=b.from(n[o].createAndFill(null,s));let i=r.state.tr.replace(t.pos,t.pos,new C(s,0,0));return i.setSelection(E.near(i.doc.resolve(t.pos+1))),r.dispatch(i),!1}function Fu(r){if(!(r.selection instanceof O))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",R.create(r.doc,[ee.widget(r.selection.head,e,{key:"gapcursor"})])}const Ru=V.create({name:"gapCursor",addProseMirrorPlugins(){return[Bu()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=k(A(r,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Iu=F.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",v(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=n.extensionManager,a=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&o){const d=a.filter(p=>l.includes(p.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Pu=F.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,v(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>vr({find:new RegExp(`^(#{1,${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}});var It=200,I=function(){};I.prototype.append=function(e){return e.length?(e=I.from(e),!this.length&&e||e.length<It&&this.leafAppend(e)||this.length<It&&e.leafPrepend(this)||this.appendInner(e)):this};I.prototype.prepend=function(e){return e.length?I.from(e).append(this):this};I.prototype.appendInner=function(e){return new zu(this,e)};I.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?I.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};I.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};I.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};I.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},t,n),s};I.from=function(e){return e instanceof I?e:e&&e.length?new yi(e):I.empty};var yi=function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,l){for(var a=i;a<o;a++)if(s(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,l){for(var a=i-1;a>=o;a--)if(s(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=It)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=It)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(I);I.empty=new yi([]);var zu=function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,i,o){var l=this.left.length;if(s<l&&this.left.forEachInner(n,s,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(n,Math.max(s-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,i,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(n,s-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(n,Math.min(s,l),i,o)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(n,s):n>=i?this.right.slice(n-i,s-i):this.left.slice(n,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(I);const Hu=500;class X{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,i;t&&(s=this.remapping(n,this.items.length),i=s.maps.length);let o=e.tr,l,a,u=[],c=[];return this.items.forEach((d,p)=>{if(!d.step){s||(s=this.remapping(n,p+1),i=s.maps.length),i--,c.push(d);return}if(s){c.push(new ie(d.map));let f=d.step.map(s.slice(i)),h;f&&o.maybeStep(f).doc&&(h=o.mapping.maps[o.mapping.maps.length-1],u.push(new ie(h,void 0,void 0,u.length+c.length))),i--,h&&s.appendMap(h,i)}else o.maybeStep(d.step);if(d.selection)return l=s?d.selection.map(s.slice(i)):d.selection,a=new X(this.items.slice(0,n).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,t,n,s){let i=[],o=this.eventCount,l=this.items,a=!s&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),p=new ie(e.mapping.maps[c],d,t),f;(f=a&&a.merge(p))&&(p=f,c?i.pop():l=l.slice(0,l.length-1)),i.push(p),t&&(o++,t=void 0),s||(a=p)}let u=o-n.depth;return u>$u&&(l=Vu(l,u),o-=u),new X(l.append(i),o)}remapping(e,t){let n=new Ze;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,o)},e,t),n}addMaps(e){return this.eventCount==0?this:new X(this.items.append(e.map(t=>new ie(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},s);let a=t;this.items.forEach(p=>{let f=i.getMirror(--a);if(f==null)return;o=Math.min(o,f);let h=i.maps[f];if(p.step){let m=e.steps[f].invert(e.docs[f]),g=p.selection&&p.selection.map(i.slice(a+1,f));g&&l++,n.push(new ie(h,m,g))}else n.push(new ie(h))},s);let u=[];for(let p=t;p<o;p++)u.push(new ie(i.maps[p]));let c=this.items.slice(0,s).append(u).append(n),d=new X(c,l);return d.emptyItemCount()>Hu&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,s=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)s.push(o),o.selection&&i++;else if(o.step){let a=o.step.map(t.slice(n)),u=a&&a.getMap();if(n--,u&&t.appendMap(u,n),a){let c=o.selection&&o.selection.map(t.slice(n));c&&i++;let d=new ie(u.invert(),a,c),p,f=s.length-1;(p=s.length&&s[f].merge(d))?s[f]=p:s.push(d)}}else o.map&&n--},this.items.length,0),new X(I.from(s.reverse()),i)}}X.empty=new X(I.empty,0);function Vu(r,e){let t;return r.forEach((n,s)=>{if(n.selection&&e--==0)return t=s,!1}),r.slice(t)}class ie{constructor(e,t,n,s){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ie(t.getMap().invert(),t,this.selection)}}}class de{constructor(e,t,n,s,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=s,this.prevComposition=i}}const $u=20;function _u(r,e,t,n){let s=t.getMeta(Be),i;if(s)return s.historyState;t.getMeta(Ju)&&(r=new de(r.done,r.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(o&&o.getMeta(Be))return o.getMeta(Be).redo?new de(r.done.addTransform(t,void 0,n,At(e)),r.undone,Vn(t.mapping.maps),r.prevTime,r.prevComposition):new de(r.done,r.undone.addTransform(t,void 0,n,At(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=r.prevTime==0||!o&&r.prevComposition!=l&&(r.prevTime<(t.time||0)-n.newGroupDelay||!Uu(t,r.prevRanges)),u=o?ur(r.prevRanges,t.mapping):Vn(t.mapping.maps);return new de(r.done.addTransform(t,a?e.selection.getBookmark():void 0,n,At(e)),X.empty,u,t.time,l??r.prevComposition)}else return(i=t.getMeta("rebased"))?new de(r.done.rebased(t,i),r.undone.rebased(t,i),ur(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new de(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),ur(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function Uu(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((n,s)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function Vn(r){let e=[];for(let t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach((n,s,i,o)=>e.push(i,o));return e}function ur(r,e){if(!r)return null;let t=[];for(let n=0;n<r.length;n+=2){let s=e.map(r[n],1),i=e.map(r[n+1],-1);s<=i&&t.push(s,i)}return t}function ju(r,e,t){let n=At(e),s=Be.get(e).spec.config,i=(t?r.undone:r.done).popEvent(e,n);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(t?r.done:r.undone).addTransform(i.transform,e.selection.getBookmark(),s,n),a=new de(t?l:i.remaining,t?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(Be,{redo:t,historyState:a})}let cr=!1,$n=null;function At(r){let e=r.plugins;if($n!=e){cr=!1,$n=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){cr=!0;break}}return cr}const Be=new ae("history"),Ju=new ae("closeHistory");function Gu(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new K({key:Be,state:{init(){return new de(X.empty,X.empty,null,0,-1)},apply(e,t,n){return _u(t,n,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,s=n=="historyUndo"?Ai:n=="historyRedo"?xi:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function bi(r,e){return(t,n)=>{let s=Be.getState(t);if(!s||(r?s.undone:s.done).eventCount==0)return!1;if(n){let i=ju(s,t,r);i&&n(e?i.scrollIntoView():i)}return!0}}const Ai=bi(!1,!0),xi=bi(!0,!0),Ku=V.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>Ai(r,e),redo:()=>({state:r,dispatch:e})=>xi(r,e)}},addProseMirrorPlugins(){return[Gu(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Wu=F.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",v(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{const{selection:t}=e,{$from:n,$to:s}=t,i=r();return n.parentOffset===0?i.insertContentAt({from:Math.max(n.pos-1,0),to:s.pos},{type:this.name}):_a(t)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:u}=o.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(E.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(w.create(o.doc,u.pos)):o.setSelection(E.create(o.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(c,d),o.setSelection(E.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gi({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Yu=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Zu=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Qu=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Xu=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ec=Z.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[_e({find:Yu,type:this.type}),_e({find:Qu,type:this.type})]},addPasteRules(){return[Ue({find:Zu,type:this.type}),Ue({find:Xu,type:this.type})]}}),tc=F.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",v(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),rc=F.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",v(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_n=Z.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",v(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:r,commands:e})=>{const t=Gt(r,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),Un=/^(\d+)\.\s$/,nc=F.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",v(this.options.HTMLAttributes,t),0]:["ol",v(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(rc.name,this.editor.getAttributes(_n.name)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=it({find:Un,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=it({find:Un,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(_n.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),sc=F.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ic=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,oc=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,lc=Z.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[_e({find:ic,type:this.type})]},addPasteRules(){return[Ue({find:oc,type:this.type})]}}),ac=F.create({name:"text",group:"inline"}),uc=V.create({name:"starterKit",addExtensions(){var r,e,t,n,s,i,o,l,a,u,c,d,p,f,h,m,g,y;const x=[];return this.options.bold!==!1&&x.push(gu.configure((r=this.options)===null||r===void 0?void 0:r.bold)),this.options.blockquote!==!1&&x.push(du.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&x.push(bu.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&x.push(Cu.configure((n=this.options)===null||n===void 0?void 0:n.code)),this.options.codeBlock!==!1&&x.push(ku.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&x.push(Du.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&x.push(Tu.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&x.push(Ru.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&x.push(Iu.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&x.push(Pu.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&x.push(Ku.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&x.push(Wu.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&x.push(ec.configure((p=this.options)===null||p===void 0?void 0:p.italic)),this.options.listItem!==!1&&x.push(tc.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&x.push(nc.configure((h=this.options)===null||h===void 0?void 0:h.orderedList)),this.options.paragraph!==!1&&x.push(sc.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&x.push(lc.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&x.push(ac.configure((y=this.options)===null||y===void 0?void 0:y.text)),x}}),cc=Z.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",v(this.options.HTMLAttributes,r),0]},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),dc=V.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new K({key:new ae("placeholder"),props:{decorations:({doc:r,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,s=[];if(!t)return null;const i=this.editor.isEmpty;return r.descendants((o,l)=>{const a=n>=l&&n<=l+o.nodeSize,u=!o.isLeaf&&mi(o);if((a||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];i&&c.push(this.options.emptyEditorClass);const d=ee.node(l,l+o.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:a}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),R.create(r,s)}}})]}}),fc=Z.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",v(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:r,commands:e})=>{const t=Gt(r,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),pc=V.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:r=>{var e;return(e=r.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.color?{style:`color: ${r.color}`}:{}}}}]},addCommands(){return{setColor:r=>({chain:e})=>e().setMark("textStyle",{color:r}).run(),unsetColor:()=>({chain:r})=>r().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),hc=V.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:r=>{const e=r.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:r=>r.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${r.textAlign}`}}}}]},addCommands(){return{setTextAlign:r=>({commands:e})=>this.options.alignments.includes(r)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:r})).every(t=>t):!1,unsetTextAlign:()=>({commands:r})=>this.options.types.map(e=>r.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),mc=V.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:r=>{var e;return(e=r.style.fontFamily)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.fontFamily?{style:`font-family: ${r.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:r=>({chain:e})=>e().setMark("textStyle",{fontFamily:r}).run(),unsetFontFamily:()=>({chain:r})=>r().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),gc=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,yc=F.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:r}){return["img",v(this.options.HTMLAttributes,r)]},addCommands(){return{setImage:r=>({commands:e})=>e.insertContent({type:this.name,attrs:r})}},addInputRules(){return[gi({find:gc,type:this.type,getAttributes:r=>{const[,,e,t,n]=r;return{src:t,alt:e,title:n}}})]}}),bc=F.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:r=>{const e=r.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:r}){return["td",v(this.options.HTMLAttributes,r),0]}}),Ac=F.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:r=>{const e=r.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:r}){return["th",v(this.options.HTMLAttributes,r),0]}}),xc=F.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:r}){return["tr",v(this.options.HTMLAttributes,r),0]}});var T;(function(r){r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator"})(T||(T={}));var Y;(function(r){r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start"})(Y||(Y={}));const jn=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Cc=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,wc=new Map([[126,Y.Element],[94,Y.Start],[36,Y.End],[42,Y.Any],[33,Y.Not],[124,Y.Hyphen]]),Ec=new Set(["has","not","matches","is","where","host","host-context"]);function kc(r){switch(r.type){case T.Adjacent:case T.Child:case T.Descendant:case T.Parent:case T.Sibling:case T.ColumnCombinator:return!0;default:return!1}}const Dc=new Set(["contains","icontains"]);function Sc(r,e,t){const n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function Je(r){return r.replace(Cc,Sc)}function dr(r){return r===39||r===34}function Jn(r){return r===32||r===9||r===10||r===12||r===13}function vc(r){const e=[],t=Ci(e,`${r}`,0);if(t<r.length)throw new Error(`Unmatched selector: ${r.slice(t)}`);return e}function Ci(r,e,t){let n=[];function s(p){const f=e.slice(t+p).match(jn);if(!f)throw new Error(`Expected name, found ${e.slice(t)}`);const[h]=f;return t+=p+h.length,Je(h)}function i(p){for(t+=p;t<e.length&&Jn(e.charCodeAt(t));)t++}function o(){t+=1;const p=t;let f=1;for(;f>0&&t<e.length;t++)e.charCodeAt(t)===40&&!l(t)?f++:e.charCodeAt(t)===41&&!l(t)&&f--;if(f)throw new Error("Parenthesis not matched");return Je(e.slice(p,t-1))}function l(p){let f=0;for(;e.charCodeAt(--p)===92;)f++;return(f&1)===1}function a(){if(n.length>0&&kc(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function u(p){if(n.length>0&&n[n.length-1].type===T.Descendant){n[n.length-1].type=p;return}a(),n.push({type:p})}function c(p,f){n.push({type:T.Attribute,name:p,action:f,value:s(1),namespace:null,ignoreCase:"quirks"})}function d(){if(n.length&&n[n.length-1].type===T.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");r.push(n)}if(i(0),e.length===t)return t;e:for(;t<e.length;){const p=e.charCodeAt(t);switch(p){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==T.Descendant)&&(a(),n.push({type:T.Descendant})),i(1);break}case 62:{u(T.Child),i(1);break}case 60:{u(T.Parent),i(1);break}case 126:{u(T.Sibling),i(1);break}case 43:{u(T.Adjacent),i(1);break}case 46:{c("class",Y.Element);break}case 35:{c("id",Y.Equals);break}case 91:{i(1);let f,h=null;e.charCodeAt(t)===124?f=s(1):e.startsWith("*|",t)?(h="*",f=s(2)):(f=s(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(h=f,f=s(1))),i(0);let m=Y.Exists;const g=wc.get(e.charCodeAt(t));if(g){if(m=g,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(t)===61&&(m=Y.Equals,i(1));let y="",x=null;if(m!=="exists"){if(dr(e.charCodeAt(t))){const L=e.charCodeAt(t);let B=t+1;for(;B<e.length&&(e.charCodeAt(B)!==L||l(B));)B+=1;if(e.charCodeAt(B)!==L)throw new Error("Attribute value didn't end");y=Je(e.slice(t+1,B)),t=B+1}else{const L=t;for(;t<e.length&&(!Jn(e.charCodeAt(t))&&e.charCodeAt(t)!==93||l(t));)t+=1;y=Je(e.slice(L,t))}i(0);const M=e.charCodeAt(t)|32;M===115?(x=!1,i(1)):M===105&&(x=!0,i(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;const S={type:T.Attribute,name:f,action:m,value:y,namespace:h,ignoreCase:x};n.push(S);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:T.PseudoElement,name:s(2).toLowerCase(),data:e.charCodeAt(t)===40?o():null});continue}const f=s(1).toLowerCase();let h=null;if(e.charCodeAt(t)===40)if(Ec.has(f)){if(dr(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${f} cannot be quoted`);if(h=[],t=Ci(h,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${f} (${e})`);t+=1}else{if(h=o(),Dc.has(f)){const m=h.charCodeAt(0);m===h.charCodeAt(h.length-1)&&dr(m)&&(h=h.slice(1,-1))}h=Je(h)}n.push({type:T.Pseudo,name:f,data:h});break}case 44:{d(),n=[],i(1);break}default:{if(e.startsWith("/*",t)){const m=e.indexOf("*/",t+2);if(m<0)throw new Error("Comment was not terminated");t=m+2,n.length===0&&i(0);break}let f=null,h;if(p===42)t+=1,h="*";else if(p===124){if(h="",e.charCodeAt(t+1)===124){u(T.ColumnCombinator),i(2);break}}else if(jn.test(e.slice(t)))h=s(0);else break e;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(f=h,e.charCodeAt(t+1)===42?(h="*",t+=2):h=s(1)),n.push(h==="*"?{type:T.Universal,namespace:f}:{type:T.Tag,name:h,namespace:f})}}}return d(),t}var Tc=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,Nc=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,Mc={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},Bc={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},Gn={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Oc=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],Kn=String.fromCharCode,Lc=function(r,e){let t=-1;const n=r.length;for(;++t<n;)if(r[t]===e)return!0;return!1};function qc(r,e){if(!r)return e;const t={};let n;for(n in e)t[n]=Wt(r,n)?r[n]:e[n];return t}var Wn=function(r,e){let t="";return r>=55296&&r<=57343||r>1114111?(e&&le("character reference outside the permissible Unicode range"),"�"):Wt(Gn,r)?(e&&le("disallowed character reference"),Gn[r]):(e&&Lc(Oc,r)&&le("disallowed character reference"),r>65535&&(r-=65536,t+=Kn(r>>>10&1023|55296),r=56320|r&1023),t+=Kn(r),t)};function le(r){throw new Error(`Parse error: ${r}`)}function Zr(r,e){e=qc(e,Zr.options);const t=e.strict;return t&&Tc.test(r)&&le("malformed character reference"),r.replace(Nc,(n,s,i,o,l,a,u,c,d)=>{let p,f,h,m,g,y;return s?(g=s,Mc[g]):i?(g=i,y=o,y&&e.isAttributeValue?(t&&y==="="&&le("`&` did not start a character reference"),n):(t&&le("named character reference was not terminated by a semicolon"),Bc[g]+(y||""))):l?(h=l,f=a,t&&!f&&le("character reference was not terminated by a semicolon"),p=Number.parseInt(h,10),Wn(p,t)):u?(m=u,f=c,t&&!f&&le("character reference was not terminated by a semicolon"),p=Number.parseInt(m,16),Wn(p,t)):(t&&le("named character reference was not terminated by a semicolon"),n)})}Zr.options={isAttributeValue:!1,strict:!1};function Tr(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}var Yn=r=>Zr(r);function Fc(r,e,t,n){if(typeof e=="function")return e({props:{...t,children:n},attrs:t,children:n,h:r.h,context:r});{let s=!0,i;if(e?e.toLowerCase()==="fragment"?(i=r.document.createDocumentFragment(),s=!1):i=r.document.createElement(e):i=r.document.createElement("div"),t&&s){const o=i;for(let[l,a]of Object.entries(t)){l=l.toString();const u=l.toLowerCase();u==="classname"?o.className=a:u==="on"?Object.entries(a).forEach(([c,d])=>{o.setAttribute(`on${c}`,String(d))}):a!==!1&&a!=null&&(a===!0?o.setAttribute(l,l):o.setAttribute(l,a.toString()))}}if(n)for(const o of n){const l=Array.isArray(o)?[...o]:[o];for(const a of l)a&&a!==!1&&a!=null&&(typeof a!="object"?i.appendChild(r.document.createTextNode(a.toString())):i.appendChild(a))}return i}}function wi(r,e,...t){return typeof r=="object"&&(r="fragment",t=r.children,e=r.attrs),Array.isArray(e)?(t=[e],e={}):e?e.attrs&&(e={...e.attrs,...e},delete e.attrs):e={},{tag:r,attrs:e,children:typeof t[0]=="string"?t:t.flat(Number.POSITIVE_INFINITY)}}function Rc(r){return r.h=function(t,n,...s){const{tag:i,attrs:o,children:l}=wi(t,n,s);return Fc(r,i,o,l)},r.h}var Ei=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","command"];function ki(r,e,t={},n){const s=!(typeof n=="string"&&n===""||Array.isArray(n)&&(n.length===0||n.length===1&&n[0]==="")||n==null),i=[];if(e=e.replace(/__/g,":"),e!=="noop"&&e!==""){e!=="cdata"?i.push(`<${e}`):i.push("<![CDATA[");for(let o in t)if(o&&Wt(t,o)){const l=t[o];if(o==="html")continue;o.toLowerCase()==="classname"&&(o="class"),o=o.replace(/__/g,":"),l===!0?i.push(` ${o}`):o==="style"&&typeof l=="object"?i.push(` ${o}="${Object.keys(l).filter(a=>l[a]!=null).map(a=>{let u=l[a];return u=typeof u=="number"?`${u}px`:u,`${a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${u}`}).join(";")}"`):l!==!1&&l!=null&&i.push(` ${o}="${Tr(l.toString())}"`)}if(e!=="cdata"){if(r&&!s)return i.push(" />"),i.join("");i.push(">")}if(!r&&Ei.includes(e))return i.join("")}if(s){if(typeof n=="string")i.push(n);else if(n&&n.length>0){for(let o of n)if(o!=null&&o!==!1){Array.isArray(o)||(o=[o]);for(const l of o)l.startsWith("<")&&l.endsWith(">")||e==="script"||e==="style"?i.push(l):i.push(Tr(l.toString()))}}}return t.html&&i.push(t.html),e!=="noop"&&e!==""&&(e!=="cdata"?i.push(`</${e}>`):i.push("]]>")),i.join("")}function Kt(r,e,...t){const{tag:n,attrs:s,children:i}=wi(r,e,t);return ki(!1,n,s,i)}var Pt=ki.bind(null,!1);Kt.firstLine="<!DOCTYPE html>";Kt.html=!0;var Zn={};function Ic(r){let e=Zn[r];return e==null&&(e=vc(r),Zn[r]=e),e}function Pc(r,e,{debug:t=!1}={}){for(const n of Ic(r)){const s=(i,o)=>{var l,a,u,c;let d=!1;for(const p of o){const{type:f,name:h,action:m,value:g,_ignoreCase:y=!0,data:x}=p;if(f==="attribute")m==="equals"?d=i.getAttribute(h)===g:m==="start"?d=!!((l=i.getAttribute(h))!=null&&l.startsWith(g)):m==="end"?d=!!((a=i.getAttribute(h))!=null&&a.endsWith(g)):m==="element"?h==="class"?d=i.classList.contains(g):d=!!((u=i.getAttribute(h))!=null&&u.includes(g)):m==="exists"?d=i.hasAttribute(h):m==="any"?d=!!((c=i.getAttribute(h))!=null&&c.includes(g)):console.warn("Unknown CSS selector action",m);else if(f==="tag")d=i.tagName===h.toUpperCase();else if(f==="universal")d=!0;else if(f==="pseudo"){if(h==="not"){let S=!0;x.forEach(M=>{s(i,M)||(S=!1)}),d=!S}}else console.warn("Unknown CSS selector type",f,r,o);if(!d)break}return d};if(s(e,n))return!0}return!1}var zc=Symbol.for("nodejs.util.inspect.custom"),Qn={fontWeight:"bold"},Xn={fontStyle:"italic"},es={backgroundColor:"rgb(255, 250, 165)"},ts={textDecorations:"underline"},fr={textDecorations:"line-through"},Hc={b:Qn,strong:Qn,em:Xn,i:Xn,mark:es,u:ts,a:ts,s:fr,del:fr,ins:es,strike:fr};function Vc(r){return r.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase())}var ue=class xt{constructor(){this.append=this.appendChild,this._parentNode=null,this._childNodes=[]}get nodeType(){return console.error("Subclasses should define nodeType!"),0}get nodeName(){return console.error("Subclasses should define nodeName!"),""}get nodeValue(){return null}cloneNode(e=!1){const t=new this.constructor;return e&&(t._childNodes=this._childNodes.map(n=>n.cloneNode(!0)),t._fixChildNodesParent()),t}_fixChildNodesParent(){this._childNodes.forEach(e=>e._parentNode=this)}insertBefore(e,t){if(e!==t){let n=t?this._childNodes.indexOf(t):0;n<0&&(n=0),this._childNodes.splice(n,0,e),this._fixChildNodesParent()}}appendChild(e){if(e!=null){if(e===this){console.warn("Cannot appendChild to self");return}if(e instanceof Xr&&console.warn("No defined how to append a document to a node!",e),e instanceof Qr)for(const t of[...e._childNodes])this.appendChild(t);else if(Array.isArray(e))for(const t of[...e])this.appendChild(t);else if(e instanceof xt)e.remove(),this._childNodes.push(e);else try{const t=typeof e=="string"?e:JSON.stringify(e,null,2);this._childNodes.push(new ze(t))}catch(t){console.error(`The data ${e} to be added to ${this.render()} is problematic: ${t}`)}this._fixChildNodesParent()}}removeChild(e){const t=this._childNodes.indexOf(e);t>=0&&(e._parentNode=null,this._childNodes.splice(t,1),this._fixChildNodesParent())}remove(){var e;return(e=this==null?void 0:this.parentNode)==null||e.removeChild(this),this}replaceChildren(...e){this._childNodes=e.map(t=>typeof t=="string"?new ze(t):t.remove()),this._fixChildNodesParent()}replaceWith(...e){const t=this._parentNode;if(t){const n=this._indexInParent();n>=0&&(e=e.map(s=>typeof s=="string"?new ze(s):s.remove()),t._childNodes.splice(n,1,...e),this._parentNode=null,t._fixChildNodesParent())}}_indexInParent(){return this._parentNode?this._parentNode.childNodes.indexOf(this):-1}get parentNode(){return this._parentNode}get childNodes(){return this._childNodes||[]}get children(){return this._childNodes||[]}get firstChild(){return this._childNodes[0]}get lastChild(){return this._childNodes[this._childNodes.length-1]}get nextSibling(){const e=this._indexInParent();return e!=null&&this.parentNode.childNodes[e+1]||null}get previousSibling(){const e=this._indexInParent();return e>0&&this.parentNode.childNodes[e-1]||null}flatten(){const e=[];this instanceof Q&&e.push(this);for(const t of this._childNodes)e.push(...t.flatten());return e}flattenNodes(){const e=[];e.push(this);for(const t of this._childNodes)e.push(...t.flattenNodes());return e}render(){return""}get textContent(){return this._childNodes.map(e=>e.textContent).join("")}set textContent(e){this._childNodes=[],e&&this.appendChild(new ze(e.toString()))}contains(e){return e===this?!0:this._childNodes.some(t=>t.contains(e))}get ownerDocument(){var e;return this.nodeType===xt.DOCUMENT_NODE||this.nodeType===xt.DOCUMENT_FRAGMENT_NODE?this:(e=this==null?void 0:this._parentNode)==null?void 0:e.ownerDocument}toString(){return`${this.nodeName}`}[zc](){return`${this.constructor.name} "${this.render()}"`}};ue.ELEMENT_NODE=1;ue.TEXT_NODE=3;ue.CDATA_SECTION_NODE=4;ue.PROCESSING_INSTRUCTION_NODE=7;ue.COMMENT_NODE=8;ue.DOCUMENT_NODE=9;ue.DOCUMENT_TYPE_NODE=10;ue.DOCUMENT_FRAGMENT_NODE=11;var me=ue,ze=class extends me{constructor(r=""){super(),this._text=r}get nodeType(){return me.TEXT_NODE}get nodeName(){return"#text"}get nodeValue(){return this._text||""}get textContent(){return this.nodeValue}render(){var r;const e=(r=this.parentNode)==null?void 0:r.tagName;return e==="SCRIPT"||e==="STYLE"?this._text:Tr(this._text)}cloneNode(r=!1){const e=super.cloneNode(r);return e._text=this._text,e}},Di=class extends me{getElementById(r){return this.flatten().find(e=>e._attributes.id===r)}getElementsByClassName(r){return this.flatten().filter(e=>e.classList.contains(r))}matches(r){return Pc(r,this)}querySelectorAll(r){return this.flatten().filter(e=>e.matches(r))}querySelector(r){return this.flatten().find(e=>e.matches(r))}parent(r){var e;return this.matches(r)?this:this.parentNode==null?null:(e=this.parentNode)==null?void 0:e.parent(r)}handle(r,e){let t=0;for(const n of this.querySelectorAll(r))e(n,t++)}},Q=class extends Di{constructor(r="div",e={}){super(),this._originalTagName=r,this._nodeName=(r||"").toUpperCase(),this._attributes=e||{},this._styles=null}get nodeType(){return me.ELEMENT_NODE}get nodeName(){return this._nodeName}cloneNode(r=!1){const e=super.cloneNode(r);return e._originalTagName=this._originalTagName,e._nodeName=this._nodeName,e._attributes=Object.assign({},this._attributes),e}get attributes(){return Object.entries(this._attributes).map(([r,e])=>({name:r,value:e}))}get attributesObject(){return{...this._attributes}}_findAttributeName(r){const e=r.toLowerCase();return Object.keys(this._attributes).find(t=>e===t.toLowerCase())||null}setAttribute(r,e){this.removeAttribute(r),this._attributes[r]=e,this._styles=null}getAttribute(r){const e=this._findAttributeName(r),t=e?this._attributes[e]:null;return t==null?null:typeof t=="string"?t:""}removeAttribute(r){this._findAttributeName(String(r))&&delete this._attributes[r]}hasAttribute(r){const e=this._findAttributeName(r);return e?this._attributes[e]!=null:!1}get style(){if(this._styles==null){const r=Object.assign({},Hc[this.tagName.toLowerCase()]||{}),e=this.getAttribute("style");if(e){let t;const n=/\s*([\w-]+)\s*:\s*([^;]+)/g;for(;t=n.exec(e);){const s=t[1],i=t[2].trim();r[s]=i,r[Vc(s)]=i}}this._styles=r}return this._styles}get tagName(){return this._nodeName}setTagName(r){this._nodeName=r.toUpperCase()}get id(){return this._attributes.id||null}set id(r){r==null?delete this._attributes.id:this._attributes.id=r}get src(){return this._attributes.src}set src(r){r==null?delete this._attributes.src:this._attributes.src=r}getElementsByTagName(r){r=r.toUpperCase();const e=this.flatten();return r!=="*"?e.filter(t=>t.tagName===r):e}setInnerHTML(r){}get innerHTML(){return this._childNodes.map(r=>r.render(Kt)).join("")}set innerHTML(r){this.setInnerHTML(r)}get outerHTML(){return this.render(Pt)}get className(){return this._attributes.class||""}set className(r){Array.isArray(r)?r=r.filter(e=>!!e).join(" "):typeof r=="object"&&(r=Object.entries(r).filter(([e,t])=>!!t).map(([e,t])=>e).join(" ")),this._attributes.class=r}get classList(){var r;const e=this,t=String((r=this.className)!=null?r:"").trim().split(/\s+/g)||[];return{contains(n){return t.includes(n)},add(n){t.includes(n)||(t.push(n),e.className=t)},remove(n){const s=t.indexOf(n);s>=0&&(t.splice(s,1),e.className=t)}}}render(r=Pt){return r(this._originalTagName||this.tagName,this._attributes,this._childNodes.map(e=>e.render(r)).join(""))}},Si=class vi extends me{get nodeName(){return super.nodeName}get nodeValue(){return super.nodeValue}get nodeType(){return vi.DOCUMENT_TYPE_NODE}render(){return"<!DOCTYPE html>"}},Qr=class Ti extends Di{get nodeType(){return me.DOCUMENT_FRAGMENT_NODE}get nodeName(){return"#document-fragment"}render(e=Pt){return this._childNodes.map(t=>t.render(e)||[]).join("")}get innerHTML(){return this._childNodes.map(e=>e.render(Kt)).join("")}createElement(e,t={}){return new Q(e,t)}createDocumentFragment(){return new Ti}createTextNode(e){return new ze(e)}},Xr=class extends Qr{get nodeType(){return me.DOCUMENT_NODE}get nodeName(){return"#document"}get documentElement(){return this.firstChild}render(r=Pt){let e=super.render(r);return this.docType&&(e=this.docType.render()+e),e}},Ni=class extends Xr{constructor(r=!1){if(super(),this.docType=new Si,!r){const e=new Q("html"),t=new Q("body"),n=new Q("head"),s=new Q("title");e.appendChild(n),n.appendChild(s),e.appendChild(t),this.appendChild(e)}}get body(){let r=this.querySelector("body");if(!r){let e=this.querySelector("html");e||(e=new Q("html"),this.appendChild(e)),r=new Q("body"),e.appendChild(e)}return r}get title(){var r;return((r=this.querySelector("title"))==null?void 0:r.textContent)||""}set title(r){const e=this.querySelector("title");e&&(e.textContent=r)}get head(){let r=this.querySelector("head");if(!r){let e=this.querySelector("html");e||(e=new Q("html"),this.appendChild(e)),r=new Q("head"),e.insertBefore(e)}return r}};function $c(){return new Xr}function _c(){return new Ni}var Mi=$c();Rc({document:Mi});var Uc={},jc=Uc.hasOwnProperty;function Wt(r,e){return jc.call(r,e)}/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var Jc=/([^=\s]+)(\s*=\s*(("([^"]*)")|('([^']*)')|[^>\s]+))?/gm,Gc=/^<\/([^>\s]+)[^>]*>/m,Kc=/^<([^>\s\/]+)((\s+[^=>\s]+(\s*=\s*(("[^"]*")|('[^']*')|[^>\s]+))?)*)\s*\/?\s*>/m,Wc=/\s*\/\s*>\s*$/m,Yc=class{constructor(r={}){this.attrRe=Jc,this.endTagRe=Gc,this.startTagRe=Kc,this.defaults={ignoreWhitespaceText:!1},r.scanner&&(this.scanner=r.scanner),this.options=Object.assign({},this.defaults,r)}parse(r){let e=!1,t,n,s;for(;r.length;){if(r.substring(0,4)==="<!--"?(t=r.indexOf("-->"),t!==-1?(this.scanner.comment(r.substring(4,t)),r=r.substring(t+3),e=!1):e=!0):r.substring(0,2)==="</"?(n=this.endTagRe.exec(r),n?(r=RegExp.rightContext,e=!1,this.parseEndTag(RegExp.lastMatch,n[1])):e=!0):r.charAt(0)==="<"&&(n=this.startTagRe.exec(r),n?(r=RegExp.rightContext,e=!1,this.parseStartTag(RegExp.lastMatch,n[1],n)):e=!0),e){t=r.indexOf("<");let i=t;t===0&&(t=r.substring(1).indexOf("<"),i=i+1),t===-1?(s=r,r=""):(s=r.substring(0,i),r=r.substring(i)),(!this.options.ignoreWhitespaceText||!/^\s*$/.test(s))&&this.scanner.characters(s)}e=!0,n=null}}parseStartTag(r,e,t){const n=Wc.test(r);let s=t[2];n&&(s=s.replace(/\s*\/\s*$/,""));const i=this.parseAttributes(e,s);this.scanner.startElement(e,i,n,t[0])}parseEndTag(r,e){this.scanner.endElement(e)}parseAttributes(r,e){const t={};return e.replace(this.attrRe,(...n)=>{var s,i;const[o,l,a,u,c,d,p,f]=n;t[l]=(i=(s=f??d)!=null?s:u)!=null?i:!0}),t}};function Zc(r){if(typeof r!="string")throw console.error("parseHTML requires string, found",r),new Error("parseHTML requires string");const e=r.indexOf("<!")===0?new Ni(!0):new Qr,t=[e];return new Yc({scanner:{startElement(s,i,o){if(s.toLowerCase()==="!doctype"){e.docType=new Si;return}for(const u in i)if(Wt(i,u)){const c=i[u];typeof c=="string"&&(i[u]=Yn(c))}const a=t[t.length-1];if(a){const u=Mi.createElement(s,i);a.appendChild(u),Ei.includes(s.toLowerCase())||o||t.push(u)}},endElement(s){t.pop()},characters(s){var i;s=Yn(s);const o=t[t.length-1];((i=o==null?void 0:o.lastChild)==null?void 0:i.nodeType)===me.TEXT_NODE?o.lastChild._text+=s:o&&o.appendChild(new ze(s))},comment(s){}}}).parse(r),e}Q.prototype.setInnerHTML=function(r){const e=Zc(r);this._childNodes=e._childNodes,this._fixChildNodesParent()};function Qc(r,e,t){return ot.fromSchema(e).serializeFragment(r.content,{document:_c()}).render()}function Xc(r,e){const t=Va(e),n=ve.fromJSON(t,r);return Qc(n,t)}const ed={props:{content:Object},name:"ArticleContent",data(){return{articleContent:""}},computed:{output(){return this.content?Xc(this.content,[uc,cc,dc,pc,fc,hc,mc,bc,Ac,xc,yc]):""}}},td=["innerHTML"];function rd(r,e,t,n,s,i){return Li(),qi("div",{innerHTML:i.output,class:"article-content"},null,8,td)}const sd=Oi(ed,[["render",rd]]);export{sd as _};
