import{o as s,c as n,b as i,m as L,u as A,k as y,l as C,_ as S,r as g,F as v,g as w,d as k,x as M,f as F,t as _,i as f,T as E,p as I,e as x,S as B,j as R,q as m,h as b}from"./index-Dy94I-Pl.js";const U={xmlns:"http://www.w3.org/2000/svg",width:"80",height:"78",fill:"none"},z=i("path",{fill:"#FC9C3C",d:"M40 .818a3.636 3.636 0 0 0-3.637 3.637V19a3.636 3.636 0 0 0 7.273 0V4.455A3.636 3.636 0 0 0 40 .818M40 62.637a3.636 3.636 0 0 0-3.637 3.636v7.273a3.636 3.636 0 0 0 7.273 0v-7.273A3.636 3.636 0 0 0 40 62.637M76.364 37.182H61.818a3.637 3.637 0 0 0 0 7.273h14.546a3.636 3.636 0 0 0 0-7.273M21.818 40.819a3.637 3.637 0 0 0-3.636-3.637H3.636a3.637 3.637 0 0 0 0 7.273h14.546a3.637 3.637 0 0 0 3.636-3.636M68.284 12.534a3.636 3.636 0 0 0-5.143 0L52.856 22.819A3.636 3.636 0 1 0 58 27.962l10.285-10.286a3.636 3.636 0 0 0 0-5.142M22 53.675 11.715 63.96a3.637 3.637 0 0 0 5.143 5.143l10.285-10.285A3.637 3.637 0 0 0 22 53.675M16.858 12.534a3.636 3.636 0 0 0-5.142 5.143L22 27.962c.71.71 1.64 1.065 2.571 1.065a3.636 3.636 0 0 0 2.571-6.207z"},null,-1),N=[z];function O(e,c){return s(),n("svg",U,[...N])}const D={render:O},H={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"none",viewBox:"0 0 24 24"},V=i("path",{stroke:"#1852E0","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 15v6m0 0-2-2m2 2 2-2M13 3H8.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C5 4.52 5 5.08 5 6.2v11.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C6.52 21 7.08 21 8.2 21H14M13 3l6 6m-6-6v4.4c0 .56 0 .84.109 1.054a1 1 0 0 0 .437.437C13.76 9 14.04 9 14.6 9H19m0 0v2"},null,-1),j=[V];function P(e,c){return s(),n("svg",H,[...j])}const W={render:P},q={name:"ErrorModal",components:{FileIcon:W},props:{subtasks:Array},computed:{...L(A,["currentLang"])},data(){return{loading:!1,loadingFiles:{}}},methods:{...y(C,["close"]),async downloadFile(e,c){try{this.loadingFiles[e]=!0;const{data:o}=await this.$axiosApi.get(`/applications/documents/${e}`);if(o.fileContent&&o.fileName)if(c==="application/pdf"){const a=atob(o.fileContent),u=a.length,l=new Uint8Array(u);for(let t=0;t<u;t++)l[t]=a.charCodeAt(t);const h=new Blob([l],{type:c}),d=window.URL.createObjectURL(h);window.open(d,"_blank"),window.URL.revokeObjectURL(d)}else{const a=atob(o.fileContent),u=a.length,l=new Uint8Array(u);for(let r=0;r<u;r++)l[r]=a.charCodeAt(r);const h=new Blob([l],{type:c}),d=window.URL.createObjectURL(h),t=document.createElement("a");t.href=d,t.download=o.fileName,t.click(),window.URL.revokeObjectURL(d)}else console.error("Ошибка: файл не содержит данных для загрузки.")}catch(o){console.error("Ошибка при скачивании файла:",o)}this.loadingFiles[e]=!1},isLoading(e){return!!this.loadingFiles[e]}}},T=e=>(I("data-v-cfd192d2"),e=e(),x(),e),G={class:"subtasks-modal"},J=T(()=>i("h4",{class:"subtasks-title"},"Документы",-1)),K={class:"file-icon"},Q=["onClick"];function X(e,c,o,a,u,l){const h=g("FileIcon"),d=B,t=M;return s(),n("div",G,[J,(s(!0),n(v,null,w(o.subtasks,r=>(s(),n("div",{key:r.id},[F(" Этап: "+_(r.name[e.currentLang])+" ",1),(s(!0),n(v,null,w(r.documents,p=>(s(),n("div",{key:p.id,class:"subtasks-file"},[i("div",K,[k(h)]),l.isLoading(p.id)?(s(),f(d,{key:0,loaderWidth:"10px",color:"#1852E0",style:{width:"15px !important"}})):(s(),n("a",{key:1,href:"#",target:"_blank",onClick:E(ue=>l.downloadFile(p.id,p.mimeType),["prevent"]),rel:"noopener noreferrer"},_(p.fileName),9,Q))]))),128))]))),128)),k(t,{text:"Закрыть",onClick:e.close,"bg-color":"#1852E0","without-icon":!0,style:{"align-self":"stretch","margin-top":"20px"}},null,8,["onClick"])])}const $=S(q,[["render",X],["__scopeId","data-v-cfd192d2"]]),Y={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"26",fill:"none",viewBox:"0 0 16 20"},Z=i("path",{fill:"#1852E0","fill-rule":"evenodd",d:"M8.006 16.14a.8.8 0 0 1-.562-.237L1.98 10.438a.807.807 0 0 1 0-1.132l.755-.757a.803.803 0 0 1 1.13 0l2.808 2.814V.799c0-.443.358-.799.798-.799h1.065c.437 0 .798.358.798.8v10.56l2.805-2.814a.803.803 0 0 1 1.13 0l.755.757c.31.316.31.822 0 1.132l-5.457 5.468a.79.79 0 0 1-.562.236M.798 17.333h14.41c.44 0 .8.356.792.8V19.2c0 .438-.358.8-.798.8H.798A.8.8 0 0 1 0 19.2v-1.067c0-.438.358-.8.798-.8","clip-rule":"evenodd"},null,-1),ee=[Z];function te(e,c){return s(),n("svg",Y,[...ee])}const se={render:te},ne=R({name:"StageList",components:{ProcessIcon:D,SubtasksModal:$,Icon:se},props:{stages:{type:Array,required:!0},currentLang:{type:String,required:!0}},methods:{...y(C,["open"]),changeColor(e){if(e.status==="IN_PROGRESS")return"#FC9C3C";if(e.status==="DONE")return"#07D580";if(e.status==="TO_DO")return"#A5AEC4"},openDocs(e){this.open($,{subtasks:e})},setSvgSize(){const e=this.$el.querySelectorAll(".svg-container svg"),o=window.innerWidth<=768?"60px":"80px";e.forEach(a=>{a.setAttribute("width",o),a.setAttribute("height",o)})}},updated(){this.setSvgSize()},mounted(){this.setSvgSize(),window.addEventListener("resize",this.setSvgSize)},beforeUnmount(){window.removeEventListener("resize",this.setSvgSize)}}),oe={class:"stages-list"},ae={class:"stage"},re={class:"stage-icon"},ie=["innerHTML"],ce=["onClick"],le={key:0,class:"dots"};function de(e,c,o,a,u,l){const h=g("ProcessIcon"),d=g("Icon");return s(),n("div",oe,[(s(!0),n(v,null,w(e.stages,(t,r)=>(s(),n("div",{key:t.id,class:"stage-wrapper"},[i("div",ae,[i("div",re,[t.status!=="IN_PROGRESS"?(s(),n("div",{key:0,class:"svg-container",innerHTML:t.icon},null,8,ie)):(s(),f(h,{key:1,width:"80px",height:"80px"})),i("div",{style:m({color:e.changeColor(t)}),class:"stage-order"},_(`0${t.order}`),5)]),i("div",{class:"stage-title",onClick:p=>t.subtasks.length>0&&t.subtasks[0].documents.length>0&&e.$route.path.startsWith("/profile/applications")?e.openDocs(t.subtasks):"",style:m({cursor:t.subtasks.length>0&&e.$route.path.startsWith("/profile/applications")?"pointer":"default"})},[t.subtasks.length>0&&t.subtasks[0].documents.length>0&&e.$route.path.startsWith("/profile/applications")?(s(),f(d,{key:0})):b("",!0),i("span",null,_(t.name[e.currentLang]),1)],12,ce)]),r<e.stages.length-1?(s(),n("div",le,"●●●")):b("",!0)]))),128))])}const pe=S(ne,[["render",de],["__scopeId","data-v-27f692e0"]]);export{pe as _};
